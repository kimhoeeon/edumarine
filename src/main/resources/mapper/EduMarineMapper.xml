<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mtf.edumarine.mapper.EduMarineMapper">

    <select id="getMemberSalt" parameterType="java.lang.String" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.getMemberSalt */
        SELECT salt
        FROM member
        WHERE id = #{id}
    </select>

    <select id="checkStatisticsAccessor" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkStatisticsAccessor */
        SELECT seq
        FROM statistics
        WHERE gbn = #{gbn}
          AND join_year = #{joinYear}
          AND in_dttm <![CDATA[>=]]> #{inDttm}
        ORDER BY in_dttm DESC
        LIMIT 1
    </select>

    <update id="updateStatisticsAccessor" parameterType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateStatisticsAccessor */
        UPDATE statistics
        SET in_count = in_count + 1
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <insert id="insertStatisticsAccessor" parameterType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertStatisticsAccessor */
        INSERT INTO statistics
        ( seq
        , join_year
        , gbn
        , in_dttm
        , in_count
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        ) VALUES
        ( CONCAT('S', LPAD(nextval('statistics_seq'), '7', '0'))
        , #{joinYear}
        , #{gbn}
        , #{inDttm}
        , #{inCount}
        , #{note}
        , 'STAT'
        , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        , 'STAT'
        , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        )
    </insert>

    <update id="updateTrainClosing" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateTrainClosing */
        UPDATE train
        SET closing_yn = 'Y'
        WHERE seq IN ( SELECT r.seq
                       FROM ( SELECT t.seq
                              FROM train t
                              WHERE t.del_yn = 'N'
                                AND t.closing_yn = 'N'
                                AND ( t.train_end_dttm <![CDATA[<]]> #{todate}
                                          OR t.apply_end_dttm <![CDATA[<]]> #{todate}
                                          OR t.train_cnt = t.train_apply_cnt
                                    )
                              ) r
                      )
    </update>

    <select id="selectPopupList" parameterType="com.mtf.edumarine.dto.PopupDTO" resultType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectPopupList */
        SELECT seq
             , use_yn
             , title
             , published_date
             , expiration_date
             , width_px
             , height_px
             , left_px
             , top_px
             , align
             , writer
             , content
             , link_url
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM popup
        WHERE 1=1
          AND del_yn = 'N'
          AND use_yn = #{useYn}
          AND published_date <![CDATA[<=]]> #{today}
          AND expiration_date <![CDATA[>=]]> #{today}
    </select>

    <select id="selectBannerList" parameterType="com.mtf.edumarine.dto.BannerDTO" resultType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBannerList */
        SELECT seq
             , title
             , view_seq
             , writer
             , write_date
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM banner
        WHERE 1=1
        AND del_yn = 'N'
        ORDER BY view_seq
    </select>

    <select id="selectTrainList" parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectTrainList */
        SELECT seq
             , gbn
             , gbn_depth
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
             , train_note
             , exposure_yn
             , schedule_exposure_yn
             , closing_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM train
        WHERE 1=1
          AND gbn LIKE CONCAT('%',#{gbn},'%')
          AND exposure_yn = 'Y'
          AND del_yn = 'N'
          AND closing_yn = 'N'
        ORDER BY train_start_dttm ASC
        LIMIT 5
    </select>

    <select id="selectTrainSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectTrainSingle */
        SELECT seq
             , gbn
             , gbn_depth
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
             , train_note
             , exposure_yn
             , schedule_exposure_yn
             , closing_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM train
        WHERE seq = #{seq}
    </select>

    <update id="updateTrainApplyCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateTrainApplyCnt */
        UPDATE train
        SET train_apply_cnt = train_apply_cnt + 1
        WHERE seq = #{seq}
    </update>

    <select id="selectTrainScheduleList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectTrainScheduleList */
        SELECT seq
             , gbn
             , gbn_depth
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
             , train_note
             , exposure_yn
             , schedule_exposure_yn
             , closing_yn
             , ( SELECT COUNT(*)
                 FROM train
                 WHERE del_yn = 'N'
                 AND exposure_yn = 'Y'
                 <if test='category != null and category != "" and !category.equals("전체")'>
                    AND category = #{category}
                 </if>
                 <if test='searchText != null and searchText != ""'>
                    AND ( gbn LIKE CONCAT('%',#{searchText},'%') or gbn_depth LIKE CONCAT('%',#{searchText},'%') )
                 </if>
                 <if test='year != null and year != ""'>
                    AND SUBSTRING(train_start_dttm,1,4) <![CDATA[>=]]> #{year}
                 </if>
                 ) AS totalRecords
        FROM train
        WHERE del_yn = 'N'
        AND exposure_yn = 'Y'
        <if test='category != null and category != "" and !category.equals("전체")'>
            AND category = #{category}
        </if>
        <if test='searchText != null and searchText != ""'>
            AND ( gbn LIKE CONCAT('%',#{searchText},'%') or gbn_depth LIKE CONCAT('%',#{searchText},'%') )
        </if>
        <if test='year != null and year != ""'>
            AND SUBSTRING(train_start_dttm,1,4) <![CDATA[>=]]> #{year}
        </if>
        ORDER BY gbn = '상시신청' DESC, closing_yn, train_start_dttm
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="selectTrainScheduleCalendarList" parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectTrainScheduleCalendarList */
        SELECT seq
             , gbn
             , gbn_depth
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
        FROM train
        WHERE 1=1
        <if test='category != null and category != "" and !category.equals("전체")'>
            AND category = #{category}
        </if>
          AND category != '전체'
          AND del_yn = 'N'
          AND schedule_exposure_yn = 'Y'
          AND closing_yn = 'N'
        ORDER BY category DESC
    </select>

    <select id="selectNoticeList" parameterType="com.mtf.edumarine.dto.NoticeDTO" resultType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectNoticeList */
        SELECT seq
             , lang
             , notice_gbn
             , title
             /*, content*/
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM notice
        WHERE 1=1
          AND del_yn = 'N'
        ORDER BY notice_gbn DESC, write_date DESC
        LIMIT 5
    </select>

    <select id="selectPressList" parameterType="com.mtf.edumarine.dto.PressDTO" resultType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectPressList */
        SELECT seq
             , lang
             , notice_gbn
             , title
             /*, content*/
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM press
        WHERE 1=1
          AND del_yn = 'N'
        ORDER BY notice_gbn DESC, write_date DESC
        LIMIT 5
    </select>

    <select id="checkDuplicateId" parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkDuplicateId */
        SELECT COUNT(1)
        FROM member
        WHERE id = #{id}
        AND del_yn = 'N'
        AND apply_status != '탈퇴'
    </select>

    <select id="getMemberSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getMemberSeq */
        SELECT CONCAT('V', LPAD(nextval('member_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertMember" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertMember */
        INSERT INTO member
        ( seq
        , apply_status
        , id
        , salt
        , password
        , grade
        , name
        , name_en
        , phone
        , birth_year
        , birth_month
        , birth_day
        , sex
        , address
        , address_detail
        , email
        , keyword
        , sms_yn
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , '회원'
            , #{id}
            , <![CDATA[#{salt}]]>
            , <![CDATA[#{password}]]>
            , #{grade}
            , #{name}
            , #{nameEn}
            , #{phone}
            , #{birthYear}
            , #{birthMonth}
            , #{birthDay}
            , #{sex}
            , #{address}
            , <![CDATA[#{addressDetail}]]>
            , #{email}
            , #{keyword}
            , #{smsYn}
            , 'N'
            , #{note}
            , 'MEMBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'MEMBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="checkMember" parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkMember */
        SELECT COUNT(1)
        FROM member
        WHERE REPLACE(phone,'-','') = REPLACE(<![CDATA[#{phone}]]>,'-','')
          AND del_yn = 'N'
          AND apply_status != '탈퇴'
    </select>

    <select id="checkMemberSingle" parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkMemberSingle */
        SELECT COUNT(1)
        FROM member
        WHERE id = #{id}
          AND password = <![CDATA[#{password}]]>
          AND del_yn = 'N'
          AND apply_status != '탈퇴'
    </select>

    <select id="getMemberEmail" parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.getMemberEmail */
        SELECT email
        FROM member
        WHERE id = #{id}
    </select>

    <update id="initMemberPassword" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.initMemberPassword */
        UPDATE member
        SET salt = <![CDATA[#{salt}]]>
          , password = <![CDATA[#{password}]]>
        WHERE id = #{id}
    </update>

    <select id="selectMemberSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectMemberSingle */
        SELECT seq
             , id
             , password
             , grade
             , name
             , name_en
             , phone
             , birth_year
             , birth_month
             , birth_day
             , sex
             , address
             , address_detail
             , email
             , keyword
             , sms_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM member
        WHERE id = #{id}
    </select>

    <select id="selectMemberSeqSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectMemberSeqSingle */
        SELECT seq
             , id
             , password
             , grade
             , name
             , name_en
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , sex
             , address
             , address_detail
             , keyword
             , sms_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM member
        WHERE seq = #{seq}
    </select>

    <update id="updateMember" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateMember */
        UPDATE member
        SET grade = #{grade}
        , name = #{name}
        , phone = #{phone}
        , birth_year = #{birthYear}
        , birth_month = #{birthMonth}
        , birth_day = #{birthDay}
        , sex = #{sex}
        , address = #{address}
        , address_detail = <![CDATA[#{addressDetail}]]>
        , email = #{email}
        , keyword = #{keyword}
        , sms_yn = #{smsYn}
        <if test='passwordChangeYn != null and !passwordChangeYn.equals("")'>
            , salt = <![CDATA[#{salt}]]>
            , password = <![CDATA[#{password}]]>
        </if>
        WHERE id = #{id}
    </update>

    <update id="updateMemberWithdraw" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateMemberWithdraw */
        UPDATE member
        SET apply_status = #{applyStatus}
          , note = <![CDATA[#{note}]]>
        WHERE seq = #{seq}
    </update>

    <select id="selectResumeSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.ResumeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectResumeSingle */
        SELECT seq
             , member_seq
             , id
             , name_ko
             , name_en
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , sex
             , age
             , address
             , address_detail
             , top_clothes_size
             , bottom_clothes_size
             , shoes_size
             , participation_path
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM resume
        WHERE member_seq = #{memberSeq}
    </select>

    <update id="updateResume" parameterType="com.mtf.edumarine.dto.ResumeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateResume */
        UPDATE resume
        SET top_clothes_size = #{topClothesSize}
          , bottom_clothes_size = #{bottomClothesSize}
          , shoes_size = #{shoesSize}
          , participation_path = #{participationPath}
        WHERE seq = #{seq}
    </update>

    <select id="getResumeSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getResumeSeq */
        SELECT CONCAT('E', LPAD(nextval('resume_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertResume" parameterType="com.mtf.edumarine.dto.ResumeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertResume */
        INSERT INTO resume
        ( seq
        , member_seq
        , id
        , top_clothes_size
        , bottom_clothes_size
        , shoes_size
        , participation_path
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{id}
            , #{topClothesSize}
            , #{bottomClothesSize}
            , #{shoesSize}
            , #{participationPath}
            , 'N'
            , #{note}
            , 'RESUME'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'RESUME'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectEmploymentList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.EmploymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectEmploymentList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT gbn
                            , employ_name
                            , employ_ceo
                            , employ_year
                            , employ_field
                            , employ_address
                            , employ_address_detail
                            , init_regi_dttm
                       FROM employment
                       WHERE del_yn = 'N'
                       AND gbn = #{gbn}
                       ) LISTA
                <if test='gbn == "창업자"'>
                ORDER BY LISTA.employ_year asc , LISTA.employ_name desc
                </if>
                <if test='gbn == "취업자"'>
                ORDER BY LISTA.employ_name desc , LISTA.init_regi_dttm desc
                </if>
                ) LISTB
        ORDER BY LISTB.rownum desc
    </select>

    <select id="selectBoardNoticeList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardNoticeList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT seq
                            , notice_gbn
                            , title
                            , writer
                            , write_date
                            , view_cnt
                            , ( SELECT COUNT(*)
                                FROM notice
                                WHERE del_yn = 'N'
                                  <if test='searchText != null and searchText != ""'>
                                      <if test='condition == "title"'>
                                      AND title LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "content"'>
                                      AND content LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "all"'>
                                      AND ( title LIKE CONCAT('%',#{searchText},'%')
                                                OR content LIKE CONCAT('%',#{searchText},'%') )
                                      </if>
                                  </if>
                                ) AS totalRecords
                       FROM notice
                       WHERE del_yn = 'N'
                         <if test='searchText != null and searchText != ""'>
                             <if test='condition == "title"'>
                             AND title LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "content"'>
                             AND content LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "all"'>
                             AND ( title LIKE CONCAT('%',#{searchText},'%')
                                       OR content LIKE CONCAT('%',#{searchText},'%') )
                           </if>
                       </if>
                       ) LISTA
                ORDER BY LISTA.notice_gbn asc, LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <update id="updateBoardNoticeViewCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBoardNoticeViewCnt */
        UPDATE notice
        SET view_cnt = view_cnt + 1
        WHERE seq = #{value}
    </update>

    <select id="selectBoardNoticeSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardNoticeSingle */
        SELECT seq
             , notice_gbn
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM notice
        WHERE seq = #{value}
    </select>

    <select id="selectBoardPressList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardPressList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT seq
                            , notice_gbn
                            , title
                            , writer
                            , write_date
                            , view_cnt
                            , ( SELECT COUNT(*)
                                FROM press
                                WHERE del_yn = 'N'
                                  <if test='searchText != null and searchText != ""'>
                                      <if test='condition == "title"'>
                                      AND title LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "content"'>
                                      AND content LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "all"'>
                                      AND ( title LIKE CONCAT('%',#{searchText},'%')
                                                OR content LIKE CONCAT('%',#{searchText},'%') )
                                      </if>
                                  </if>
                                ) AS totalRecords
                       FROM press
                       WHERE del_yn = 'N'
                         <if test='searchText != null and searchText != ""'>
                             <if test='condition == "title"'>
                             AND title LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "content"'>
                             AND content LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "all"'>
                             AND ( title LIKE CONCAT('%',#{searchText},'%')
                                       OR content LIKE CONCAT('%',#{searchText},'%') )
                           </if>
                       </if>
                       ) LISTA
                ORDER BY LISTA.notice_gbn asc, LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <update id="updateBoardPressViewCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBoardPressViewCnt */
        UPDATE press
        SET view_cnt = view_cnt + 1
        WHERE seq = #{value}
    </update>

    <select id="selectBoardPressSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardPressSingle */
        SELECT seq
             , notice_gbn
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM press
        WHERE seq = #{value}
    </select>

    <select id="selectBoardGalleryList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardGalleryList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT seq
                            , title
                            , writer
                            , write_date
                            , view_cnt
                            , ( SELECT COUNT(*)
                                FROM gallery
                                WHERE del_yn = 'N'
                                  <if test='searchText != null and searchText != ""'>
                                      <if test='condition == "title"'>
                                      AND title LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                  </if>
                                ) AS totalRecords
                       FROM gallery
                       WHERE del_yn = 'N'
                         <if test='searchText != null and searchText != ""'>
                             <if test='condition == "title"'>
                             AND title LIKE CONCAT('%',#{searchText},'%')
                             </if>
                       </if>
                       ) LISTA
                ORDER BY LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="selectBoardMediaList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardMediaList */
        SELECT seq
             , title
             , writer
             , write_date
             , media_url
             , media_key
        , ( SELECT COUNT(*)
                 FROM media
                 WHERE del_yn = 'N'
                   <if test='searchText != null and searchText != ""'>
                       <if test='condition == "title"'>
                       AND title LIKE CONCAT('%',#{searchText},'%')
                       </if>
                   </if>
                 ) AS totalRecords
        FROM media
        WHERE del_yn = 'N'
            <if test='searchText != null and searchText != ""'>
                <if test='condition == "title"'>
                    AND title LIKE CONCAT('%',#{searchText},'%')
                </if>
            </if>
        ORDER BY write_date DESC, final_regi_dttm DESC
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="selectBoardNewsList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardNewsList */
        SELECT seq
             , title
             , write_date
             , content_gbn
             , content
             , content_ta
        , ( SELECT COUNT(*)
                 FROM newsletter
                 WHERE del_yn = 'N'
                   <if test='searchText != null and searchText != ""'>
                       <if test='condition == "title"'>
                       AND title LIKE CONCAT('%',#{searchText},'%')
                       </if>
                   </if>
                 ) AS totalRecords
        FROM newsletter
        WHERE del_yn = 'N'
            <if test='searchText != null and searchText != ""'>
                <if test='condition == "title"'>
                    AND title LIKE CONCAT('%',#{searchText},'%')
                </if>
            </if>
        ORDER BY write_date DESC, final_regi_dttm DESC
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="selectBoardNewsSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectBoardNewsSingle */
        SELECT seq
             , notice_gbn
             , title
             , content_gbn
             , content
             , content_ta
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM newsletter
        WHERE seq = #{value}
    </select>

    <update id="updateBoardNewsViewCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBoardNewsViewCnt */
        UPDATE newsletter
        SET view_cnt = view_cnt + 1
        WHERE seq = #{value}
    </update>

    <select id="selectJobReviewList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectJobReviewList */
        SELECT seq
             , title
             , writer
             , write_date
             , ( SELECT COUNT(*)
                 FROM job
                 WHERE del_yn = 'N'
                   <if test='searchText != null and searchText != ""'>
                       <if test='condition == "title"'>
                       AND title LIKE CONCAT('%',#{searchText},'%')
                       </if>
                   </if>
                 ) AS totalRecords
        FROM job
        WHERE del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition == "title"'>
              AND title LIKE CONCAT('%',#{searchText},'%')
              </if>
          </if>
        ORDER BY write_date desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="getRegularSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getRegularSeq */
        SELECT CONCAT('U', LPAD(nextval('regular_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertRegular" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertRegular */
        INSERT INTO regular
        ( seq
        , member_seq
        , train_seq
        , region
        , participation_path
        , first_application_field
        , second_application_field
        , third_application_field
        , desired_education_time
        , major
        , experience_yn
        , recommend_person
        , apply_status
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{region}
            , #{participationPath}
            , #{firstApplicationField}
            , #{secondApplicationField}
            , #{thirdApplicationField}
            , #{desiredEducationTime}
            , #{major}
            , #{experienceYn}
            , #{recommendPerson}
            , #{applyStatus}
            , 'N'
            , #{note}
            , 'REGULAR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'REGULAR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updatePreRegularInfo" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updatePreRegularInfo */
        UPDATE regular
        SET member_seq = #{memberSeq}
          , email = #{email}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE name = #{name}
        AND phone = #{phone}
    </update>

    <select id="selectPreRegularSingle" parameterType="com.mtf.edumarine.dto.RegularDTO" resultType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectPreRegularSingle */
        SELECT seq
             , member_seq
             , train_seq
             , name
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , age_group
             , region
             , participation_path
             , first_application_field
             , second_application_field
             , third_application_field
             , desired_education_time
             , major
             , experience_yn
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM regular
        WHERE name = #{name}
        AND phone = #{phone}
        LIMIT 1
    </select>

    <select id="checkCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkCommunity */
        SELECT COUNT(*)
        FROM community
        WHERE writer_key = #{writerKey}
          AND write_date BETWEEN CONCAT(#{writeDate},' 00:00:00') AND CONCAT(#{writeDate},' 23:59:59')
          AND del_yn = 'N'
          AND writer != '관리자'
    </select>

    <select id="checkReply" parameterType="com.mtf.edumarine.dto.ReplyDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMapper.checkReply */
        SELECT COUNT(*)
        FROM reply
        WHERE writer = #{writer}
          AND write_date BETWEEN CONCAT(#{writeDate},' 00:00:00') AND CONCAT(#{writeDate},' 23:59:59')
    </select>

    <select id="selectCommunityList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectCommunityList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT seq
                            , gbn
                            , title
                            , writer
                            , writer_key
                            , write_date
                            , recommend_cnt
                            , view_cnt
                            , ( SELECT COUNT(*)
                                FROM community
                                WHERE del_yn = 'N'
                                  <if test='searchText != null and searchText != ""'>
                                      <if test='condition == "title"'>
                                      AND title LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "content"'>
                                      AND content LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "all"'>
                                      AND ( title LIKE CONCAT('%',#{searchText},'%')
                                                OR content LIKE CONCAT('%',#{searchText},'%') )
                                      </if>
                                  </if>
                                ) AS totalRecords
                       FROM community
                       WHERE del_yn = 'N'
                         <if test='searchText != null and searchText != ""'>
                             <if test='condition == "title"'>
                             AND title LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "content"'>
                             AND content LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "all"'>
                             AND ( title LIKE CONCAT('%',#{searchText},'%')
                                       OR content LIKE CONCAT('%',#{searchText},'%') )
                           </if>
                       </if>
                       ) LISTA
                ORDER BY LISTA.gbn asc, LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <select id="selectCommunitySingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectCommunitySingle */
        SELECT seq
             , gbn
             , title
             , content
             , hashtag
             , writer
             , writer_key
             , write_date
             , recommend_cnt
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM community
        WHERE seq = #{seq}
    </select>

    <update id="updateCommunityViewCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateCommunityViewCnt */
        UPDATE community
        SET view_cnt = view_cnt + 1
        WHERE seq = #{value}
    </update>

    <select id="selectRecommendSingle" parameterType="com.mtf.edumarine.dto.RecommendDTO" resultType="com.mtf.edumarine.dto.RecommendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectRecommendSingle */
        SELECT seq
             , member_id
             , community_seq
        FROM recommend
        WHERE member_id = #{memberId}
        AND community_seq = #{communitySeq}
    </select>

    <delete id="deleteRecommend" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteRecommend */
        DELETE FROM recommend
        WHERE seq = #{seq}
    </delete>

    <insert id="insertRecommend" parameterType="com.mtf.edumarine.dto.RecommendDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertRecommend */
        INSERT INTO recommend
        ( seq
        , member_id
        , community_seq
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( CONCAT('R',LPAD(nextval('recommend_seq'),'7','0'))
            , #{memberId}
            , #{communitySeq}
            , #{note}
            , 'RECOMMEND'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'RECOMMEND'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectReplyList" parameterType="com.mtf.edumarine.dto.ReplyDTO" resultType="com.mtf.edumarine.dto.ReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectReplyList */
        SELECT seq
             , community_seq
             , depth_reply_no
             , mo_reply_seq
             , writer
             , content
             , write_date
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM reply
        WHERE community_seq = #{communitySeq}
        order by write_date
    </select>

    <select id="getReplySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getReplySeq */
        SELECT CONCAT('R', LPAD(nextval('reply_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertReply" parameterType="com.mtf.edumarine.dto.ReplyDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertReply */
        INSERT INTO reply
        ( seq
        , community_seq
        , depth_reply_no
        , mo_reply_seq
        , writer
        , content
        , write_date
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{communitySeq}
            , #{depthReplyNo}
            , #{moReplySeq}
            , #{writer}
            , <![CDATA[#{content}]]>
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , #{note}
            , 'REPLY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'REPLY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteReply" parameterType="com.mtf.edumarine.dto.ReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteReply */
        DELETE FROM reply
        WHERE seq = #{seq}
    </delete>

    <delete id="deleteReplyToReply" parameterType="com.mtf.edumarine.dto.ReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteReplyToReply */
        DELETE FROM reply
        WHERE mo_reply_seq = #{moReplySeq}
    </delete>

    <select id="getCommunitySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMapper.getCommunitySeq */
        SELECT CONCAT('C', LPAD(nextval('community_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertCommunity */
        INSERT INTO community
        ( seq
        , gbn
        , title
        , content
        , hashtag
        , writer
        , writer_key
        , write_date
        , recommend_cnt
        , view_cnt
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , '0'
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , <![CDATA[#{hashtag}]]>
            , #{writer}
            , #{writerKey}
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 0
            , 0
            , null
            , 'N'
            , #{note}
            , 'COMMUNITY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'COMMUNITY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteCommunity */
        DELETE FROM community
        WHERE seq = #{seq}
    </delete>

    <update id="updateCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateCommunity */
        UPDATE community
        SET title = <![CDATA[#{title}]]>
        , content = <![CDATA[#{content}]]>
        , write_date = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        , hashtag = <![CDATA[#{hashtag}]]>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectPostCommunityList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectPostCommunityList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT seq
                            , title
                            , writer
                            , writer_key
                            , write_date
                            , recommend_cnt
                            , view_cnt
                       FROM community
                       WHERE writer_key = #{writerKey}
                       ) LISTA
                ORDER BY LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
    </select>

    <select id="selectPostReplyList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.ReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectPostReplyList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT p.seq
                            , (SELECT c.title
                               FROM community c
                               WHERE c.seq = p.community_seq) as communityTitle
                            , p.depth_reply_no
                            , p.mo_reply_seq
                            , p.writer
                            , p.content
                            , p.write_date
                       FROM reply p
                       WHERE p.writer = #{writer}
                       ) LISTA
                ORDER BY LISTA.write_date asc
                ) LISTB
        ORDER BY LISTB.rownum desc
    </select>

    <select id="selectFileIdSingle" parameterType="com.mtf.edumarine.dto.FileDTO" resultType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectFileIdSingle */
        SELECT id
             , user_id
             , full_file_path
             , full_path
             , folder_path
             , full_file_name
             , uuid
             , file_name
             , file_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM file
        WHERE 1=1
          AND id = #{id}
          AND file_yn = 'Y'
        LIMIT 1
    </select>

    <select id="selectFileList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectFileIdSingle */
        SELECT id
             , user_id
             , full_file_path
             , full_path
             , folder_path
             , full_file_name
             , uuid
             , file_name
             , file_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM file
        WHERE user_id = #{value}
        AND file_yn = 'Y'
        ORDER BY LENGTH(note) ASC, note ASC
    </select>

    <select id="getPaymentSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getPaymentSeq */
        SELECT CONCAT('Y', LPAD(nextval('payment_seq'), '7', '0'))
        FROM DUAL
    </select>

    <select id="selectMemberSeq"  parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectMemberSeq */
        SELECT seq
        FROM member
        WHERE name = #{name}
          AND phone = #{phone}
    </select>

    <select id="selectTrainSeq"  parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectTrainSeq */
        SELECT seq
        FROM train
        WHERE gbn = #{gbn}
          AND apply_start_dttm <![CDATA[<=]]> #{today}
          AND apply_end_dttm <![CDATA[>=]]> #{today}
    </select>

    <insert id="insertPayment" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertPayment */
        INSERT INTO payment
            ( seq
            , member_seq
            , member_name
            , member_phone
            , table_seq
            , train_seq
            , train_name
            , buyer_name
            , buyer_tel
            , buyer_email
            , cust_email
            , pay_sum
            , tot_price
            , good_name
            , goods_name
            , pay_status
            , appl_date
            , appl_time
            , moid
            , mid
            , tid
            , appl_num
            , auth_signature
            , event_code
            , pay_method
            , currency
            , p_fn_nm
            , card_num
            , card_code
            , card_corp_flag
            , card_member_num
            , card_appl_price
            , card_point
            , card_quota
            , card_purchase_code
            , card_prtc_code
            , card_check_flag
            , card_bank_code
            , card_terminal_num
            , card_use_point
            , card_interest
            , card_src_code
            , card_gwcode
            , card_purchase_name
            , pay_device
            , vact_date
            , vact_time
            , vact_name
            , vact_input_name
            , vact_bank_code
            , vact_bank_name
            , vact_num
            , result_code
            , result_msg
            , refund_reason
            , del_yn
            , note
            , init_regi_pic
            , init_regi_dttm
            , final_regi_pic
            , final_regi_dttm
            )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{memberName}
            , #{memberPhone}
            , #{tableSeq}
            , #{trainSeq}
            , #{trainName}
            , #{buyerName}
            , #{buyerTel}
            , #{buyerEmail}
            , #{custEmail}
            , #{paySum}
            , #{totPrice}
            , #{goodName}
            , #{goodsName}
            , #{payStatus}
            , #{applDate}
            , #{applTime}
            , #{moid}
            , #{mid}
            , #{tid}
            , #{applNum}
            , #{authSignature}
            , #{eventCode}
            , #{payMethod}
            , #{currency}
            , #{pFnNm}
            , #{cardNum}
            , #{cardCode}
            , #{cardCorpFlag}
            , #{cardMemberNum}
            , #{cardApplPrice}
            , #{cardPoint}
            , #{cardQuota}
            , #{cardPurchaseCode}
            , #{cardPrtcCode}
            , #{cardCheckFlag}
            , #{cardBankCode}
            , #{cardTerminalNum}
            , #{cardUsePoint}
            , #{cardInterest}
            , #{cardSrcCode}
            , #{cardGwcode}
            , #{cardPurchaseName}
            , #{payDevice}
            , #{vactDate}
            , #{vactTime}
            , #{vactName}
            , #{vactInputName}
            , #{vactBankCode}
            , #{vactBankName}
            , #{vactNum}
            , #{resultCode}
            , #{resultMsg}
            , <![CDATA[#{refundReason}]]>
            , 'N'
            , #{note}
            , 'PAYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'PAYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateRegularPayStatus" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateRegularPayStatus */
        UPDATE regular
        SET apply_status = #{applyStatus}
          <if test='cancelReason != null and cancelReason != ""'>
          , cancel_reason = #{cancelReason}
          , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateBoarderPayStatus" parameterType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBoarderPayStatus */
        UPDATE boarder
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateFrpPayStatus" parameterType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateFrpPayStatus */
        UPDATE frp
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateInboarderPayStatus" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateInboarderPayStatus */
        UPDATE inboarder
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateOutboarderPayStatus" parameterType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateOutboarderPayStatus */
        UPDATE outboarder
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSailyachtPayStatus" parameterType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSailyachtPayStatus */
        UPDATE sailyacht
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighHorsePowerPayStatus" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighHorsePowerPayStatus */
        UPDATE highhorsepower
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSelfPayStatus" parameterType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighSelfPayStatus */
        UPDATE highself
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSpecialPayStatus" parameterType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighSpecialPayStatus */
        UPDATE highspecial
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSterndrivePayStatus" parameterType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSterndrivePayStatus */
        UPDATE sterndrive
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSternSpecialPayStatus" parameterType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSternSpecialPayStatus */
        UPDATE sternspecial
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateBasicPayStatus" parameterType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBasicPayStatus */
        UPDATE basic
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateEmergencyPayStatus" parameterType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateEmergencyPayStatus */
        UPDATE emergency
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateGeneratorPayStatus" parameterType="com.mtf.edumarine.dto.GeneratorDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateGeneratorPayStatus */
        UPDATE generator
        SET apply_status = #{applyStatus}
        <if test='refundBankCode != null and refundBankCode != ""'>
            , refund_bank_code = #{refundBankCode}
        </if>
        <if test='refundBankName != null and refundBankName != ""'>
            , refund_bank_name = #{refundBankName}
        </if>
        <if test='refundBankCustomerName != null and refundBankCustomerName != ""'>
            , refund_bank_customer_name = #{refundBankCustomerName}
        </if>
        <if test='refundBankNumber != null and refundBankNumber != ""'>
            , refund_bank_number = #{refundBankNumber}
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectEduApplyInfoList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.EduApplyInfoDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectEduApplyInfoList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                   , LISTA.trainname
                   , LISTA.train_seq
                   , IF(LISTA.paystatus = '결제완료'
                       , '신청완료'
                       , IF(LISTA.paystatus = '수강확정' AND (DATE_FORMAT(NOW(), '%Y.%m.%d') <![CDATA[>=]]> LISTA.trainStartDttm AND DATE_FORMAT(NOW(), '%Y.%m.%d') <![CDATA[<=]]> LISTA.trainEndDttm)
                           ,'수강중'
                           , LISTA.payStatus)
                       ) AS payStatus
                   , IFNULL(LISTA.payMethod,'미결제') as payMethod
                   , LISTA.seq
                   , LISTA.final_regi_dttm
                   , LISTA.trainStartDttm
                   , LISTA.trainEndDttm
                   , CASE WHEN DATEDIFF(LISTA.trainStartDttm,NOW()) <![CDATA[>]]> 4 THEN 'Y' ELSE 'N' END AS changeYn
              FROM ( SELECT @ROWNUM := 0) R
                 , ( SELECT '상시신청' AS trainName
                          , r.train_seq
                          , r.apply_status AS payStatus
                          , r.seq
                          , r.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = r.member_seq and p.table_seq = r.seq and p.train_seq = r.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = r.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = r.train_seq) AS trainEndDttm
                     FROM regular r
	                 WHERE r.member_seq = #{memberSeq}
	                 AND r.apply_status NOT LIKE CONCAT('%','취소','%')
	                 UNION ALL
                     SELECT '해상엔진 테크니션 (선내기/선외기)' AS trainName
                          , b.train_seq
                          , b.apply_status AS payStatus
                          , b.seq
                          , b.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = b.member_seq and p.table_seq = b.seq and p.train_seq = b.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = b.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = b.train_seq) AS trainEndDttm
                     FROM boarder b
                     WHERE b.member_seq = #{memberSeq}
                       AND b.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT 'FRP 레저보트 선체 정비 테크니션' AS trainName
                          , f.train_seq
                          , f.apply_status AS payStatus
                          , f.seq
                          , f.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = f.member_seq and p.table_seq = f.seq and p.train_seq = f.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = f.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = f.train_seq) AS trainEndDttm
                     FROM frp f
                     WHERE f.member_seq = #{memberSeq}
                       AND f.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
	                 SELECT '해상엔진 자가정비 (선내기)' AS trainName
	                      , i.train_seq
	                      , i.apply_status AS payStatus
	                      , i.seq
	                      , i.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = i.member_seq and p.table_seq = i.seq and p.train_seq = i.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = i.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = i.train_seq) AS trainEndDttm
	                 FROM inboarder i
	                 WHERE i.member_seq = #{memberSeq}
	                 AND i.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '해상엔진 자가정비 (선외기)' AS trainName
                          , o.train_seq
                          , o.apply_status AS payStatus
                          , o.seq
                          , o.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = o.member_seq and p.table_seq = o.seq and p.train_seq = o.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = o.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = o.train_seq) AS trainEndDttm
                     FROM outboarder o
                     WHERE o.member_seq = #{memberSeq}
                       AND o.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '해상엔진 자가정비 (세일요트)' AS trainName
                          , s.train_seq
                          , s.apply_status AS payStatus
                          , s.seq
                          , s.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = s.member_seq and p.table_seq = s.seq and p.train_seq = s.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = s.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = s.train_seq) AS trainEndDttm
                     FROM sailyacht s
                     WHERE s.member_seq = #{memberSeq}
                       AND s.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '고마력 선외기 정비 중급 테크니션' AS trainName
                          , h.train_seq
                          , h.apply_status AS payStatus
                          , h.seq
                          , h.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = h.member_seq and p.table_seq = h.seq and p.train_seq = h.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = h.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = h.train_seq) AS trainEndDttm
                     FROM highhorsepower h
                     WHERE h.member_seq = #{memberSeq}
                       AND h.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '자가정비 심화과정 (고마력 선외기)' AS trainName
                          , e.train_seq
                          , e.apply_status AS payStatus
                          , e.seq
                          , e.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = e.member_seq and p.table_seq = e.seq and p.train_seq = e.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = e.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = e.train_seq) AS trainEndDttm
                     FROM highself e
                     WHERE e.member_seq = #{memberSeq}
                       AND e.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '고마력 선외기 정비 중급 테크니션 (특별반)' AS trainName
                          , c.train_seq
                          , c.apply_status AS payStatus
                          , c.seq
                          , c.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = c.member_seq and p.table_seq = c.seq and p.train_seq = c.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = c.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = c.train_seq) AS trainEndDttm
                     FROM highspecial c
                     WHERE c.member_seq = #{memberSeq}
                       AND c.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '스턴드라이브 정비 전문가과정' AS trainName
                          , t.train_seq
                          , t.apply_status AS payStatus
                          , t.seq
                          , t.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = t.member_seq and p.table_seq = t.seq and p.train_seq = t.train_seq) as payMethod
                          , (SELECT t1.train_start_dttm FROM train t1 WHERE t1.seq = t.train_seq) AS trainStartDttm
                          , (SELECT t2.train_end_dttm FROM train t2 WHERE t2.seq = t.train_seq) AS trainEndDttm
                     FROM sterndrive t
                     WHERE t.member_seq = #{memberSeq}
                       AND t.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '스턴드라이브 정비 전문가과정 (특별반)' AS trainName
                          , ss.train_seq
                          , ss.apply_status AS payStatus
                          , ss.seq
                          , ss.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = ss.member_seq and p.table_seq = ss.seq and p.train_seq = ss.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ss.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ss.train_seq) AS trainEndDttm
                     FROM sternspecial ss
                     WHERE ss.member_seq = #{memberSeq}
                       AND ss.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT concat(ba.boarder_gbn, ' 기초정비교육') AS trainName
                          , ba.train_seq
                          , ba.apply_status AS payStatus
                          , ba.seq
                          , ba.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = ba.member_seq and p.table_seq = ba.seq and p.train_seq = ba.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ba.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ba.train_seq) AS trainEndDttm
                     FROM basic ba
                     WHERE ba.member_seq = #{memberSeq}
                       AND ba.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT concat(em.boarder_gbn, ' 응급조치교육') AS trainName
                          , em.train_seq
                          , em.apply_status AS payStatus
                          , em.seq
                          , em.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = em.member_seq and p.table_seq = em.seq and p.train_seq = em.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = em.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = em.train_seq) AS trainEndDttm
                     FROM emergency em
                     WHERE em.member_seq = #{memberSeq}
                       AND em.apply_status NOT LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '발전기 정비 교육' AS trainName
                          , ge.train_seq
                          , ge.apply_status AS payStatus
                          , ge.seq
                          , ge.final_regi_dttm
                          , (SELECT p.pay_method from payment p where p.member_seq = ge.member_seq and p.table_seq = ge.seq and p.train_seq = ge.train_seq) as payMethod
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ge.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ge.train_seq) AS trainEndDttm
                     FROM generator ge
                     WHERE ge.member_seq = #{memberSeq}
                       AND ge.apply_status NOT LIKE CONCAT('%','취소','%')
	              ) LISTA
              ORDER BY LISTA.final_regi_dttm ASC
             ) LISTB
        ORDER BY LISTB.rownum DESC
    </select>

    <select id="selectEduApplyInfoCancelList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.EduApplyInfoDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectEduApplyInfoCancelList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                   , LISTA.*
              FROM ( SELECT @ROWNUM := 0) R
                 , ( SELECT '상시신청' AS trainName
                          , r.train_seq
                          , r.apply_status AS payStatus
                          , r.seq
                          , r.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = r.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = r.train_seq) AS trainEndDttm
                     FROM regular r
	                 WHERE r.member_seq = #{memberSeq}
	                 AND r.apply_status LIKE CONCAT('%','취소','%')
	                 UNION ALL
                     SELECT '해상엔진 테크니션 (선내기/선외기)' AS trainName
                          , b.train_seq
                          , b.apply_status AS payStatus
                          , b.seq
                          , b.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = b.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = b.train_seq) AS trainEndDttm
                     FROM boarder b
                     WHERE b.member_seq = #{memberSeq}
                       AND b.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT 'FRP 레저보트 선체 정비 테크니션' AS trainName
                          , f.train_seq
                          , f.apply_status AS payStatus
                          , f.seq
                          , f.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = f.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = f.train_seq) AS trainEndDttm
                     FROM frp f
                     WHERE f.member_seq = #{memberSeq}
                       AND f.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
	                 SELECT '해상엔진 자가정비 (선내기)' AS trainName
	                      , i.train_seq
	                      , i.apply_status AS payStatus
	                      , i.seq
	                      , i.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = i.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = i.train_seq) AS trainEndDttm
	                 FROM inboarder i
	                 WHERE i.member_seq = #{memberSeq}
	                 AND i.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '해상엔진 자가정비 (선외기)' AS trainName
                          , o.train_seq
                          , o.apply_status AS payStatus
                          , o.seq
                          , o.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = o.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = o.train_seq) AS trainEndDttm
                     FROM outboarder o
                     WHERE o.member_seq = #{memberSeq}
                       AND o.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '해상엔진 자가정비 (세일요트)' AS trainName
                          , s.train_seq
                          , s.apply_status AS payStatus
                          , s.seq
                          , s.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = s.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = s.train_seq) AS trainEndDttm
                     FROM sailyacht s
                     WHERE s.member_seq = #{memberSeq}
                       AND s.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '고마력 선외기 정비 중급 테크니션' AS trainName
                          , h.train_seq
                          , h.apply_status AS payStatus
                          , h.seq
                          , h.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = h.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = h.train_seq) AS trainEndDttm
                     FROM highhorsepower h
                     WHERE h.member_seq = #{memberSeq}
                       AND h.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '자가정비 심화과정 (고마력 선외기)' AS trainName
                          , e.train_seq
                          , e.apply_status AS payStatus
                          , e.seq
                          , e.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = e.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = e.train_seq) AS trainEndDttm
                     FROM highself e
                     WHERE e.member_seq = #{memberSeq}
                       AND e.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '고마력 선외기 정비 중급 테크니션 (특별반)' AS trainName
                          , c.train_seq
                          , c.apply_status AS payStatus
                          , c.seq
                          , c.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = c.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = c.train_seq) AS trainEndDttm
                     FROM highspecial c
                     WHERE c.member_seq = #{memberSeq}
                       AND c.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '스턴드라이브 정비 전문가과정' AS trainName
                          , t.train_seq
                          , t.apply_status AS payStatus
                          , t.seq
                          , t.final_regi_dttm
                          , (SELECT t1.train_start_dttm FROM train t1 WHERE t1.seq = t.train_seq) AS trainStartDttm
                          , (SELECT t2.train_end_dttm FROM train t2 WHERE t2.seq = t.train_seq) AS trainEndDttm
                     FROM sterndrive t
                     WHERE t.member_seq = #{memberSeq}
                       AND t.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '스턴드라이브 정비 전문가과정 (특별반)' AS trainName
                          , ss.train_seq
                          , ss.apply_status AS payStatus
                          , ss.seq
                          , ss.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ss.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ss.train_seq) AS trainEndDttm
                     FROM sternspecial ss
                     WHERE ss.member_seq = #{memberSeq}
                       AND ss.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT concat(ba.boarder_gbn, ' 기초정비교육') AS trainName
                          , ba.train_seq
                          , ba.apply_status AS payStatus
                          , ba.seq
                          , ba.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ba.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ba.train_seq) AS trainEndDttm
                     FROM basic ba
                     WHERE ba.member_seq = #{memberSeq}
                       AND ba.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT concat(em.boarder_gbn, ' 응급조치교육') AS trainName
                          , em.train_seq
                          , em.apply_status AS payStatus
                          , em.seq
                          , em.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = em.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = em.train_seq) AS trainEndDttm
                     FROM emergency em
                     WHERE em.member_seq = #{memberSeq}
                       AND em.apply_status LIKE CONCAT('%','취소','%')
                     UNION ALL
                     SELECT '발전기 정비 교육' AS trainName
                          , ge.train_seq
                          , ge.apply_status AS payStatus
                          , ge.seq
                          , ge.final_regi_dttm
                          , (SELECT t.train_start_dttm FROM train t WHERE t.seq = ge.train_seq) AS trainStartDttm
                          , (SELECT t.train_end_dttm FROM train t WHERE t.seq = ge.train_seq) AS trainEndDttm
                     FROM generator ge
                     WHERE ge.member_seq = #{memberSeq}
                       AND ge.apply_status LIKE CONCAT('%','취소','%')
	              ) LISTA
              ORDER BY LISTA.final_regi_dttm ASC
             ) LISTB
        ORDER BY LISTB.rownum DESC
    </select>

    <select id="selectRegularSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectRegularSingle */
        SELECT seq
             , member_seq
             , train_seq
             , region
             , participation_path
             , first_application_field
             , second_application_field
             , third_application_field
             , desired_education_time
             , major
             , experience_yn
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM regular
        WHERE seq = #{seq}
    </select>

    <update id="updateRegular" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateRegular */
        UPDATE regular
        SET region = #{region}
          , participation_path = #{participationPath}
          , first_application_field = #{firstApplicationField}
          , second_application_field = #{secondApplicationField}
          , third_application_field = #{thirdApplicationField}
          , desired_education_time = #{desiredEducationTime}
          , major = #{major}
          , experience_yn = #{experienceYn}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectCareerList" parameterType="com.mtf.edumarine.dto.CareerDTO" resultType="com.mtf.edumarine.dto.CareerDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectCareerList */
        SELECT seq
             , boarder_seq
             , member_seq
             , train_seq
             , career_place
             , career_date
             , career_position
             , career_task
             , career_location
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM career
        WHERE boarder_seq = #{boarderSeq}
    </select>

    <select id="selectLicenseList" parameterType="com.mtf.edumarine.dto.LicenseDTO" resultType="com.mtf.edumarine.dto.LicenseDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectLicenseList */
        SELECT seq
             , boarder_seq
             , member_seq
             , train_seq
             , license_name
             , license_date
             , license_org
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM license
        WHERE boarder_seq = #{boarderSeq}
    </select>

    <select id="selectBoarderSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectBoarderSingle */
        SELECT b.seq
             , b.member_seq
             , b.train_seq
             , b.id
             , b.top_clothes_size
             , b.bottom_clothes_size
             , b.shoes_size
             , b.participation_path
             , b.grade_gbn
             , b.school_name
             , b.major
             , b.military_gbn
             , b.military_reason
             , b.disabled_gbn
             , b.job_support_gbn
             , b.tech_edu_gbn
             , b.tech_edu_name
             , b.apply_reason
             , b.tech_reason
             , b.activity_reason
             , b.plan_reason
             , b.etc_reason
             , b.apply_status
             , b.cancel_dttm
             , b.cancel_reason
             , b.del_yn
             , b.note
             , b.init_regi_pic
             , b.init_regi_dttm
             , b.final_regi_pic
             , b.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = b.member_seq AND p.table_seq = b.seq AND p.train_seq = b.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = b.train_seq) AS changeYn
        FROM boarder b
        WHERE b.seq = #{seq}
    </select>

    <select id="selectFrpSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectFrpSingle */
        SELECT f.seq
             , f.member_seq
             , f.train_seq
             , f.id
             , f.top_clothes_size
             , f.bottom_clothes_size
             , f.shoes_size
             , f.participation_path
             , f.grade_gbn
             , f.school_name
             , f.major
             , f.military_gbn
             , f.military_reason
             , f.disabled_gbn
             , f.job_support_gbn
             , f.know_path
             , f.know_path_reason
             , f.apply_reason
             , f.tech_reason
             , f.activity_reason
             , f.plan_reason
             , f.etc_reason
             , f.apply_status
             , f.cancel_dttm
             , f.cancel_reason
             , f.del_yn
             , f.note
             , f.init_regi_pic
             , f.init_regi_dttm
             , f.final_regi_pic
             , f.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = f.member_seq AND p.table_seq = f.seq AND p.train_seq = f.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = f.train_seq) AS changeYn
        FROM frp f
        WHERE f.seq = #{seq}
    </select>

    <select id="selectPaymentList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectPaymentList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                   , LISTA.*
              FROM ( SELECT @ROWNUM := 0) R
                 , ( SELECT seq
                          , member_seq
                          , table_seq
                          , train_seq
                          , train_name
                          , tot_price
                          , appl_date
                          , pay_method
                          , p_fn_nm
                          , card_num
                          , vact_date
                          , vact_name
                          , vact_bank_name
                          , vact_num
                          , pay_status
                          , init_regi_dttm
                     FROM payment
                     WHERE member_seq = #{memberSeq}
	              ) LISTA
              ORDER BY LISTA.init_regi_dttm ASC
             ) LISTB
        ORDER BY LISTB.rownum DESC
    </select>

    <select id="getBoarderSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getBoarderSeq */
        SELECT CONCAT('F', LPAD(nextval('boarder_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertBoarder" parameterType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertBoarder */
        INSERT INTO boarder
        ( seq
        , member_seq
        , train_seq
        , id
        , top_clothes_size
        , bottom_clothes_size
        , shoes_size
        , participation_path
        , grade_gbn
        , school_name
        , major
        , military_gbn
        , military_reason
        , disabled_gbn
        , job_support_gbn
        , tech_edu_gbn
        , tech_edu_name
        , apply_reason
        , tech_reason
        , activity_reason
        , plan_reason
        , etc_reason
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{id}
            , #{topClothesSize}
            , #{bottomClothesSize}
            , #{shoesSize}
            , #{participationPath}
            , #{gradeGbn}
            , #{schoolName}
            , #{major}
            , #{militaryGbn}
            , #{militaryReason}
            , #{disabledGbn}
            , #{jobSupportGbn}
            , #{techEduGbn}
            , #{techEduName}
            , #{applyReason}
            , #{techReason}
            , #{activityReason}
            , #{planReason}
            , #{etcReason}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'BOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'BOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <insert id="insertCareer" parameterType="com.mtf.edumarine.dto.CareerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertCareer */
        INSERT INTO career
        ( seq
        , boarder_seq
        , member_seq
        , train_seq
        , career_place
        , career_date
        , career_position
        , career_task
        , career_location
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        ) VALUES
            ( CONCAT('CA', LPAD(nextval('career_seq'), '7', '0'))
            , #{boarderSeq}
            , #{memberSeq}
            , #{trainSeq}
            , #{careerPlace}
            , #{careerDate}
            , #{careerPosition}
            , #{careerTask}
            , #{careerLocation}
            , #{note}
            , 'CAREER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'CAREER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <insert id="insertLicense" parameterType="com.mtf.edumarine.dto.LicenseDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertLicense */
        INSERT INTO license
        ( seq
        , boarder_seq
        , member_seq
        , train_seq
        , license_name
        , license_date
        , license_org
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        ) VALUES
            ( CONCAT('LI', LPAD(nextval('license_seq'), '7', '0'))
            , #{boarderSeq}
            , #{memberSeq}
            , #{trainSeq}
            , #{licenseName}
            , #{licenseDate}
            , #{licenseOrg}
            , #{note}
            , 'LICENSE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'LICENSE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateBoarder" parameterType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBoarder */
        UPDATE boarder
        SET top_clothes_size = #{topClothesSize}
          , bottom_clothes_size = #{bottomClothesSize}
          , shoes_size = #{shoesSize}
          , participation_path = #{participationPath}
          , grade_gbn = #{gradeGbn}
          , school_name = #{schoolName}
          , major = #{major}
          , military_gbn = #{militaryGbn}
          , military_reason = #{militaryReason}
          , disabled_gbn = #{disabledGbn}
          , job_support_gbn = #{jobSupportGbn}
          , tech_edu_gbn = #{techEduGbn}
          , tech_edu_name = #{techEduName}
          , apply_reason = #{applyReason}
          , tech_reason = #{techReason}
          , activity_reason = #{activityReason}
          , plan_reason = #{planReason}
          , etc_reason = #{etcReason}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateCareer" parameterType="com.mtf.edumarine.dto.CareerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateCareer */
        UPDATE career
        SET career_place = #{careerPlace}
          , career_date = #{careerDate}
          , career_position = #{careerPosition}
          , career_task = #{careerTask}
          , career_location = #{careerLocation}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateLicense" parameterType="com.mtf.edumarine.dto.LicenseDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateLicense */
        UPDATE license
        SET license_name = #{licenseName}
          , license_date = #{licenseDate}
          , license_org = #{licenseOrg}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <delete id="deleteCareer" parameterType="com.mtf.edumarine.dto.CareerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteCareer */
        DELETE FROM career
        WHERE seq = #{seq}
    </delete>

    <delete id="deleteLicense" parameterType="com.mtf.edumarine.dto.LicenseDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteLicense */
        DELETE FROM license
        WHERE seq = #{seq}
    </delete>

    <select id="getFrpSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getFrpSeq */
        SELECT CONCAT('FR', LPAD(nextval('frp_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertFrp" parameterType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.insertFrp */
        INSERT INTO frp
        ( seq
        , member_seq
        , train_seq
        , id
        , top_clothes_size
        , bottom_clothes_size
        , shoes_size
        , participation_path
        , grade_gbn
        , school_name
        , major
        , military_gbn
        , military_reason
        , disabled_gbn
        , job_support_gbn
        , know_path
        , know_path_reason
        , apply_reason
        , tech_reason
        , activity_reason
        , plan_reason
        , etc_reason
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{id}
            , #{topClothesSize}
            , #{bottomClothesSize}
            , #{shoesSize}
            , #{participationPath}
            , #{gradeGbn}
            , #{schoolName}
            , #{major}
            , #{militaryGbn}
            , #{militaryReason}
            , #{disabledGbn}
            , #{jobSupportGbn}
            , #{knowPath}
            , #{knowPathReason}
            , #{applyReason}
            , #{techReason}
            , #{activityReason}
            , #{planReason}
            , #{etcReason}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'BOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'BOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateFrp" parameterType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateFrp */
        UPDATE frp
        SET top_clothes_size = #{topClothesSize}
          , bottom_clothes_size = #{bottomClothesSize}
          , shoes_size = #{shoesSize}
          , participation_path = #{participationPath}
          , grade_gbn = #{gradeGbn}
          , school_name = #{schoolName}
          , major = #{major}
          , military_gbn = #{militaryGbn}
          , military_reason = #{militaryReason}
          , disabled_gbn = #{disabledGbn}
          , job_support_gbn = #{jobSupportGbn}
          , know_path = #{knowPath}
          , know_path_reason = #{knowPathReason}
          , apply_reason = #{applyReason}
          , tech_reason = #{techReason}
          , activity_reason = #{activityReason}
          , plan_reason = #{planReason}
          , etc_reason = #{etcReason}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getInboarderSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getInboarderSeq */
        SELECT CONCAT('I', LPAD(nextval('inboarder_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertInboarder" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertInboarder */
        INSERT INTO inboarder
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'INBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'INBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectInboarderSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectInboarderSingle */
        SELECT i.seq
             , i.member_seq
             , i.train_seq
             , i.clothes_size
             , i.participation_path
             , i.apply_status
             , i.cancel_dttm
             , i.cancel_reason
             , i.del_yn
             , i.note
             , i.init_regi_pic
             , i.init_regi_dttm
             , i.final_regi_pic
             , i.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = i.member_seq AND p.table_seq = i.seq AND p.train_seq = i.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = i.train_seq) AS changeYn
        FROM inboarder i
        WHERE i.seq = #{seq}
    </select>

    <update id="updateInboarder" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateInboarder */
        UPDATE inboarder
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getOutboarderSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getOutboarderSeq */
        SELECT CONCAT('O', LPAD(nextval('outboarder_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertOutboarder" parameterType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertOutboarder */
        INSERT INTO outboarder
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'OUTBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'OUTBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getSailyachtSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getSailyachtSeq */
        SELECT CONCAT('SA', LPAD(nextval('sailyacht_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSailyacht" parameterType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertSailyacht */
        INSERT INTO sailyacht
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'SAILYACHT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'SAILYACHT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getHighHorsePowerSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getHighHorsePowerSeq */
        SELECT CONCAT('HP', LPAD(nextval('highhorsepower_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertHighHorsePower" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertHighHorsePower */
        INSERT INTO highhorsepower
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , train_understand
        , train_understand_etc
        , recommend_person
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{trainUnderstand}
            , #{trainUnderstandEtc}
            , #{recommendPerson}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'HIGHHORSEPOWER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'HIGHHORSEPOWER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getHighSelfSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getHighSelfSeq */
        SELECT CONCAT('HF', LPAD(nextval('highself_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertHighSelf" parameterType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertHighSelf */
        INSERT INTO highself
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , train_understand
        , train_understand_etc
        , recommend_person
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{trainUnderstand}
            , #{trainUnderstandEtc}
            , #{recommendPerson}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'HIGHSELF'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'HIGHSELF'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getHighSpecialSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getHighSpecialSeq */
        SELECT CONCAT('HC', LPAD(nextval('highspecial_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertHighSpecial" parameterType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertHighSpecial */
        INSERT INTO highspecial
        ( seq
        , member_seq
        , train_seq
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'HIGHSPECIAL'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'HIGHSPECIAL'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getSterndriveSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getSterndriveSeq */
        SELECT CONCAT('SD', LPAD(nextval('sterndrive_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSterndrive" parameterType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertSterndrive */
        INSERT INTO sterndrive
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , train_understand
        , train_understand_etc
        , recommend_person
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{trainUnderstand}
            , #{trainUnderstandEtc}
            , #{recommendPerson}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'STERNDRIVE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'STERNDRIVE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getSternSpecialSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getSternSpecialSeq */
        SELECT CONCAT('SS', LPAD(nextval('sternspecial_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSternSpecial" parameterType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertSternSpecial */
        INSERT INTO sternspecial
        ( seq
        , member_seq
        , train_seq
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'STERNSPECIAL'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'STERNSPECIAL'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getBasicSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getBasicSeq */
        SELECT CONCAT('BA', LPAD(nextval('basic_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertBasic" parameterType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertBasic */
        INSERT INTO basic
        ( seq
        , member_seq
        , train_seq
        , boarder_gbn
        , clothes_size
        , participation_path
        , recommend_person
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{boarderGbn}
            , #{clothesSize}
            , #{participationPath}
            , #{recommendPerson}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'BASIC'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'BASIC'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectBasicSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectBasicSingle */
        SELECT b.seq
             , b.member_seq
             , b.train_seq
             , b.boarder_gbn
             , b.clothes_size
             , b.participation_path
             , b.recommend_person
             , b.apply_status
             , b.cancel_dttm
             , b.cancel_reason
             , b.del_yn
             , b.note
             , b.init_regi_pic
             , b.init_regi_dttm
             , b.final_regi_pic
             , b.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = b.member_seq AND p.table_seq = b.seq AND p.train_seq = b.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = b.train_seq) AS changeYn
        FROM basic b
        WHERE b.seq = #{seq}
    </select>

    <update id="updateBasic" parameterType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateBasic */
        UPDATE basic
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getEmergencySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getEmergencySeq */
        SELECT CONCAT('EM', LPAD(nextval('emergency_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertEmergency" parameterType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertEmergency */
        INSERT INTO emergency
        ( seq
        , member_seq
        , train_seq
        , boarder_gbn
        , clothes_size
        , participation_path
        , recommend_person
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{boarderGbn}
            , #{clothesSize}
            , #{participationPath}
            , #{recommendPerson}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'EMERGENCY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'EMERGENCY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectEmergencySingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectEmergencySingle */
        SELECT em.seq
             , em.member_seq
             , em.train_seq
             , em.boarder_gbn
             , em.clothes_size
             , em.participation_path
             , em.recommend_person
             , em.apply_status
             , em.cancel_dttm
             , em.cancel_reason
             , em.del_yn
             , em.note
             , em.init_regi_pic
             , em.init_regi_dttm
             , em.final_regi_pic
             , em.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = em.member_seq AND p.table_seq = em.seq AND p.train_seq = em.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = em.train_seq) AS changeYn
        FROM emergency em
        WHERE em.seq = #{seq}
    </select>

    <update id="updateEmergency" parameterType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateEmergency */
        UPDATE emergency
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getGeneratorSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMapper.getGeneratorSeq */
        SELECT CONCAT('GE', LPAD(nextval('generator_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertGenerator" parameterType="com.mtf.edumarine.dto.GeneratorDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.insertGenerator */
        INSERT INTO generator
        ( seq
        , member_seq
        , train_seq
        , clothes_size
        , participation_path
        , train_understand
        , train_understand_etc
        , apply_status
        , cancel_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{clothesSize}
            , #{participationPath}
            , #{trainUnderstand}
            , #{trainUnderstandEtc}
            , #{applyStatus}
            , #{cancelReason}
            , 'N'
            , #{note}
            , 'GENERATOR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'GENERATOR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectGeneratorSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.GeneratorDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectGeneratorSingle */
        SELECT ge.seq
             , ge.member_seq
             , ge.train_seq
             , ge.clothes_size
             , ge.participation_path
             , ge.apply_status
             , ge.cancel_dttm
             , ge.cancel_reason
             , ge.del_yn
             , ge.note
             , ge.init_regi_pic
             , ge.init_regi_dttm
             , ge.final_regi_pic
             , ge.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = ge.member_seq AND p.table_seq = ge.seq AND p.train_seq = ge.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = ge.train_seq) AS changeYn
        FROM generator ge
        WHERE ge.seq = #{seq}
    </select>

    <update id="updateGenerator" parameterType="com.mtf.edumarine.dto.GeneratorDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateGenerator */
        UPDATE generator
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , train_understand = #{trainUnderstand}
          , train_understand_etc = #{trainUnderstandEtc}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectOutboarderSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectOutboarderSingle */
        SELECT o.seq
             , o.member_seq
             , o.train_seq
             , o.clothes_size
             , o.participation_path
             , o.apply_status
             , o.cancel_dttm
             , o.cancel_reason
             , o.del_yn
             , o.note
             , o.init_regi_pic
             , o.init_regi_dttm
             , o.final_regi_pic
             , o.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = o.member_seq AND p.table_seq = o.seq AND p.train_seq = o.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = o.train_seq) AS changeYn
        FROM outboarder o
        WHERE o.seq = #{seq}
    </select>

    <select id="selectSailyachtSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSailyachtSingle */
        SELECT s.seq
             , s.member_seq
             , s.train_seq
             , s.clothes_size
             , s.participation_path
             , s.apply_status
             , s.cancel_dttm
             , s.cancel_reason
             , s.del_yn
             , s.note
             , s.init_regi_pic
             , s.init_regi_dttm
             , s.final_regi_pic
             , s.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = s.member_seq AND p.table_seq = s.seq AND p.train_seq = s.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = s.train_seq) AS changeYn
        FROM sailyacht s
        WHERE s.seq = #{seq}
    </select>

    <select id="selectHighHorsePowerSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighHorsePowerSingle */
        SELECT h.seq
             , h.member_seq
             , h.train_seq
             , h.clothes_size
             , h.participation_path
             , h.train_understand
             , h.train_understand_etc
             , h.recommend_person
             , h.apply_status
             , h.cancel_dttm
             , h.cancel_reason
             , h.del_yn
             , h.note
             , h.init_regi_pic
             , h.init_regi_dttm
             , h.final_regi_pic
             , h.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = h.member_seq AND p.table_seq = h.seq AND p.train_seq = h.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = h.train_seq) AS changeYn
        FROM highhorsepower h
        WHERE h.seq = #{seq}
    </select>

    <select id="selectHighSelfSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighSelfSingle */
        SELECT hs.seq
             , hs.member_seq
             , hs.train_seq
             , hs.clothes_size
             , hs.participation_path
             , hs.train_understand
             , hs.train_understand_etc
             , hs.recommend_person
             , hs.apply_status
             , hs.cancel_dttm
             , hs.cancel_reason
             , hs.del_yn
             , hs.note
             , hs.init_regi_pic
             , hs.init_regi_dttm
             , hs.final_regi_pic
             , hs.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = hs.member_seq AND p.table_seq = hs.seq AND p.train_seq = hs.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = hs.train_seq) AS changeYn
        FROM highself hs
        WHERE hs.seq = #{seq}
    </select>

    <select id="selectHighSpecialSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighSpecialSingle */
        SELECT c.seq
             , c.member_seq
             , c.train_seq
             , c.apply_status
             , c.cancel_dttm
             , c.cancel_reason
             , c.del_yn
             , c.note
             , c.init_regi_pic
             , c.init_regi_dttm
             , c.final_regi_pic
             , c.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = c.member_seq AND p.table_seq = c.seq AND p.train_seq = c.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = c.train_seq) AS changeYn
        FROM highspecial c
        WHERE c.seq = #{seq}
    </select>

    <select id="selectSterndriveSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSterndriveSingle */
        SELECT t.seq
             , t.member_seq
             , t.train_seq
             , t.clothes_size
             , t.participation_path
             , t.train_understand
             , t.train_understand_etc
             , t.recommend_person
             , t.apply_status
             , t.cancel_dttm
             , t.cancel_reason
             , t.del_yn
             , t.note
             , t.init_regi_pic
             , t.init_regi_dttm
             , t.final_regi_pic
             , t.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = t.member_seq AND p.table_seq = t.seq AND p.train_seq = t.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t1.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t1 WHERE t1.seq = t.train_seq) AS changeYn
        FROM sterndrive t
        WHERE t.seq = #{seq}
    </select>

    <select id="selectSternSpecialSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSternSpecialSingle */
        SELECT ss.seq
             , ss.member_seq
             , ss.train_seq
             , ss.apply_status
             , ss.cancel_dttm
             , ss.cancel_reason
             , ss.del_yn
             , ss.note
             , ss.init_regi_pic
             , ss.init_regi_dttm
             , ss.final_regi_pic
             , ss.final_regi_dttm
             , (SELECT p.pay_method FROM payment p WHERE p.member_seq = ss.member_seq AND p.table_seq = ss.seq AND p.train_seq = ss.train_seq) AS payMethod
             , (SELECT CASE WHEN DATEDIFF(t.train_start_dttm,NOW()) <![CDATA[>]]> 0 THEN 'Y' ELSE 'N' END FROM train t WHERE t.seq = ss.train_seq) AS changeYn
        FROM sternspecial ss
        WHERE ss.seq = #{seq}
    </select>

    <update id="updateOutboarder" parameterType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateOutboarder */
        UPDATE outboarder
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSailyacht" parameterType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSailyacht */
        UPDATE sailyacht
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighhorsepower" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighhorsepower */
        UPDATE highhorsepower
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , train_understand = #{trainUnderstand}
          , train_understand_etc = #{trainUnderstandEtc}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSelf" parameterType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighSelf */
        UPDATE highself
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , train_understand = #{trainUnderstand}
          , train_understand_etc = #{trainUnderstandEtc}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSpecial" parameterType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateHighSpecial */
        UPDATE highspecial
        SET note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSterndrive" parameterType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSterndrive */
        UPDATE sterndrive
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , train_understand = #{trainUnderstand}
          , train_understand_etc = #{trainUnderstandEtc}
          , recommend_person = #{recommendPerson}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSternSpecial" parameterType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updateSternSpecial */
        UPDATE sternspecial
        SET note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectFaqList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.FaqDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectFaqList */
        SELECT LISTB.*
        FROM (SELECT @ROWNUM := @ROWNUM + 1 AS rownum
                    , LISTA.*
                FROM ( SELECT @ROWNUM := 0) R
                   , ( SELECT question
                            , answer
                            , write_date
                            , ( SELECT COUNT(*)
                                FROM faq
                                WHERE del_yn = 'N'
                                  AND exposure_yn = 'Y'
                                  <if test='searchText != null and searchText != ""'>
                                      <if test='condition == "QUESTION"'>
                                      AND question LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "ANSWER"'>
                                      AND answer LIKE CONCAT('%',#{searchText},'%')
                                      </if>
                                      <if test='condition == "ALL"'>
                                      AND ( question LIKE CONCAT('%',#{searchText},'%')
                                                OR answer LIKE CONCAT('%',#{searchText},'%') )
                                      </if>
                                  </if>
                                ) AS totalRecords
                       FROM faq
                       WHERE del_yn = 'N'
                         AND exposure_yn = 'Y'
                         <if test='searchText != null and searchText != ""'>
                             <if test='condition == "QUESTION"'>
                             AND question LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "ANSWER"'>
                             AND answer LIKE CONCAT('%',#{searchText},'%')
                             </if>
                             <if test='condition == "ALL"'>
                             AND ( question LIKE CONCAT('%',#{searchText},'%')
                                       OR answer LIKE CONCAT('%',#{searchText},'%') )
                           </if>
                       </if>
                       ) LISTA
                ORDER BY LISTA.write_date
                ) LISTB
        ORDER BY LISTB.rownum desc
        <if test='pageNum != null and !pageNum.equals("") and rows != null and !rows.equals("")'>
            LIMIT #{pageNum} , #{rows}
        </if>
    </select>

    <delete id="deleteFile" parameterType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.deleteFile */
        DELETE FROM file
        WHERE id = #{id}
    </delete>

    <select id="selectRegularPreCheck" parameterType="com.mtf.edumarine.dto.RegularDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectRegularPreCheck */
        SELECT COUNT(1)
        FROM regular
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectBoarderPreCheck" parameterType="com.mtf.edumarine.dto.BoarderDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectBoarderPreCheck */
        SELECT COUNT(1)
        FROM boarder
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectFrpPreCheck" parameterType="com.mtf.edumarine.dto.FrpDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectFrpPreCheck */
        SELECT COUNT(1)
        FROM frp
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectBasicPreCheck" parameterType="com.mtf.edumarine.dto.BasicDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectBasicPreCheck */
        SELECT COUNT(1)
        FROM basic
        WHERE member_seq = #{memberSeq}
          AND boarder_gbn = #{boarderGbn}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectGeneratorPreCheck" parameterType="com.mtf.edumarine.dto.GeneratorDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectGeneratorPreCheck */
        SELECT COUNT(1)
        FROM generator
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectEmergencyPreCheck" parameterType="com.mtf.edumarine.dto.EmergencyDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectEmergencyPreCheck */
        SELECT COUNT(1)
        FROM emergency
        WHERE member_seq = #{memberSeq}
          AND boarder_gbn = #{boarderGbn}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectInboarderPreCheck" parameterType="com.mtf.edumarine.dto.InboarderDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectInboarderPreCheck */
        SELECT COUNT(1)
        FROM inboarder
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectOutboarderPreCheck" parameterType="com.mtf.edumarine.dto.OutboarderDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectOutboarderPreCheck */
        SELECT COUNT(1)
        FROM outboarder
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectSailyachtPreCheck" parameterType="com.mtf.edumarine.dto.SailyachtDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSailyachtPreCheck */
        SELECT COUNT(1)
        FROM sailyacht
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectHighHorsePowerPreCheck" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighHorsePowerPreCheck */
        SELECT COUNT(1)
        FROM highhorsepower
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectHighSelfPreCheck" parameterType="com.mtf.edumarine.dto.HighSelfDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighSelfPreCheck */
        SELECT COUNT(1)
        FROM highself
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectHighSpecialPreCheck" parameterType="com.mtf.edumarine.dto.HighSpecialDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectHighSpecialPreCheck */
        SELECT COUNT(1)
        FROM highspecial
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectSterndrivePreCheck" parameterType="com.mtf.edumarine.dto.SterndriveDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSterndrivePreCheck */
        SELECT COUNT(1)
        FROM sterndrive
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <select id="selectSternSpecialPreCheck" parameterType="com.mtf.edumarine.dto.SternSpecialDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectSternSpecialPreCheck */
        SELECT COUNT(1)
        FROM sternspecial
        WHERE member_seq = #{memberSeq}
          AND apply_status NOT LIKE '%취소%'
    </select>

    <update id="updatePaymentVbankNoti" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.updatePaymentVbankNoti */
        UPDATE payment
        SET pay_status = #{payStatus}
        WHERE moid = <![CDATA[#{moid}]]>
          AND vact_num = <![CDATA[#{vactNum}]]>
          AND tot_price = <![CDATA[#{totPrice}]]>
          AND pay_status = '입금대기'
    </update>

    <select id="selectPaymentVbankInfo" parameterType="com.mtf.edumarine.dto.PaymentDTO" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectPaymentVbankInfo */
        SELECT member_seq
             , table_seq
             , train_seq
             , train_name
        FROM payment
        WHERE del_yn = 'N'
          AND moid = <![CDATA[#{moid}]]>
          AND vact_num = <![CDATA[#{vactNum}]]>
          AND tot_price = <![CDATA[#{totPrice}]]>
    </select>

    <select id="selectPaymentTableSeq" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.selectPaymentTableSeq */
        SELECT seq
             , member_seq
             , member_name
             , member_phone
             , table_seq
             , train_seq
             , train_name
             , buyer_name
             , buyer_tel
             , buyer_email
             , cust_email
             , pay_sum
             , tot_price
             , good_name
             , goods_name
             , pay_status
             , appl_date
             , appl_time
             , moid
             , mid
             , tid
             , appl_num
             , auth_signature
             , event_code
             , pay_method
             , currency
             , p_fn_nm
             , card_num
             , card_code
             , card_corp_flag
             , card_member_num
             , card_appl_price
             , card_point
             , card_quota
             , card_purchase_code
             , card_prtc_code
             , card_check_flag
             , card_bank_code
             , card_terminal_num
             , card_use_point
             , card_interest
             , card_src_code
             , card_gwcode
             , card_purchase_name
             , pay_device
             , vact_date
             , vact_time
             , vact_name
             , vact_input_name
             , vact_bank_code
             , vact_bank_name
             , vact_num
             , result_code
             , result_msg
             , refund_reason
             , cancel_gbn
             , cancel_date
             , cancel_time
             , prtc_date
             , prtc_time
             , cancel_tid
             , prtc_price
             , prtc_remains
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM payment
        WHERE table_seq = #{tableSeq}
    </select>

    <update id="updatePayment" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMapper.updatePayment */
        UPDATE payment
        SET pay_status = #{payStatus}
        <if test='refundReason != null and refundReason != ""'>
            , refund_reason = <![CDATA[#{refundReason}]]>
        </if>
        , note = #{note}
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectTrainTemplateList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.TrainTemplateDTO$TrainTemplateInfo">
        /* com.mtf.edumarine.mapper.EdumarineMapper.selectTrainTemplateList */
        SELECT major
             , middle
             , small
             , value
             , note
        FROM train_template
        WHERE major = #{major}
        ORDER BY major, small, middle , CAST(note as signed)
    </select>

</mapper>