<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri ="http://java.sun.com/jsp/jstl/functions" prefix = "fn" %>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-368L9FRD5B"></script>
    <script>   window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-368L9FRD5B'); </script>

    <meta name="google-site-verification" content="nOdgBX2kjgySRAVZjwMl-AmYg53q0GxLBOV_qEtG7jk" />

    <meta name="naver-site-verification" content="8027433e606d42e31ef9e566afbd709c593e33bc" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-language" content="ko">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no" />
    <meta name="copyright" content="경기테크노파크">
    <meta name="robots" content="all">
    <meta property="og:locale" content="ko_KR">
    <meta itemprop="inLanguage" content="ko-kr">
    <meta name="resource-type" content="website">
    <meta property="og:type" content="website">

    <meta property="og:site_name" content="경기해양레저인력양성센터">
    <title>경기해양레저 인력양성센터</title>

    <meta name="title" content="경기해양레저인력양성센터">
    <meta property="og:title" content="경기해양레저인력양성센터">
    <meta name="twitter:title" content="경기해양레저인력양성센터">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://edumarine.org/main.do">
    <meta itemprop="name" content="경기해양레저인력양성센터">
    <meta property="nate:title" content="경기해양레저인력양성센터">
    <meta property="nate:url" content="https://edumarine.org/main.do">

    <meta property="og:url" content="https://edumarine.org/main.do">
    <meta itemprop="url" content="https://edumarine.org/main.do">
    <link rel="canonical" id="canonical" href="https://edumarine.org/main.do">

    <meta name="description" content="경기해양레저인력양성센터는 경기도가 ‘16년도에 전국 최초로 개설한 해양레저 테크니션 전문교육기관입니다.">
    <meta name="twitter:description" content="경기해양레저인력양성센터는 경기도가 ‘16년도에 전국 최초로 개설한 해양레저 테크니션 전문교육기관입니다.">
    <meta property="og:description" content="경기해양레저인력양성센터는 경기도가 ‘16년도에 전국 최초로 개설한 해양레저 테크니션 전문교육기관입니다.">
    <meta itemprop="description" content="경기해양레저인력양성센터는 경기도가 ‘16년도에 전국 최초로 개설한 해양레저 테크니션 전문교육기관입니다.">
    <meta property="nate:description" content="경기해양레저인력양성센터는 경기도가 ‘16년도에 전국 최초로 개설한 해양레저 테크니션 전문교육기관입니다.">

    <meta property="og:keywords" content="경기해양레저인력양성센터, EDU marine, 에듀마린, 해상엔진, 해상엔진 교육, 선박엔진, 선박엔진 교육, 선외기, 선외기 교육, 선외기 정비 교육, 선내기, 선내기 교육, 선외기 정비 교육, 선체, 선체 교육, 선체 정비 교육, 해양레저, 해양레저 교육, 요트 교육, 요트정비 교육, 엔진정비 교육  편집 지켜보기">
    <meta name="keywords" content="경기해양레저인력양성센터, EDU marine, 에듀마린, 해상엔진, 해상엔진 교육, 선박엔진, 선박엔진 교육, 선외기, 선외기 교육, 선외기 정비 교육, 선내기, 선내기 교육, 선외기 정비 교육, 선체, 선체 교육, 선체 정비 교육, 해양레저, 해양레저 교육, 요트 교육, 요트정비 교육, 엔진정비 교육  편집 지켜보기">
    <meta property="twitter:keywords" content="경기해양레저인력양성센터, EDU marine, 에듀마린, 해상엔진, 해상엔진 교육, 선박엔진, 선박엔진 교육, 선외기, 선외기 교육, 선외기 정비 교육, 선내기, 선내기 교육, 선외기 정비 교육, 선체, 선체 교육, 선체 정비 교육, 해양레저, 해양레저 교육, 요트 교육, 요트정비 교육, 엔진정비 교육  편집 지켜보기">

    <meta name="image" content="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">
    <meta name="twitter:image " content="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">
    <meta property="og:image" content="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">
    <meta itemprop="image" content="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">
    <meta itemprop="thumbnailUrl" content="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">
    <link rel="image_src" link="https://cdn2.micehub.com/home/2017/edua/Files/edua_20210604_122121.jpg">

    <!-- 캐시를 바로 만료시킴. -->
    <meta http-equiv="Expires" content="-1" />

    <!-- 페이지 로드시마다 페이지를 캐싱하지 않음. (HTTP 1.0) -->
    <meta http-equiv="Pragma" content="no-cache" />

    <!-- 페이지 로드시마다 페이지를 캐싱하지 않음. (HTTP 1.1) -->
    <meta http-equiv="Cache-Control" content="no-cache" />

    <%-- favicon --%>
    <link rel="apple-touch-icon" sizes="57x57" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="<%request.getContextPath();%>/static/img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="<%request.getContextPath();%>/static/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="<%request.getContextPath();%>/static/img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="<%request.getContextPath();%>/static/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="<%request.getContextPath();%>/static/img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <%-- favicon --%>

    <!-- swiper 외부 라이브러리 -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <%-- sweetalert CDN --%>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.min.css" rel="stylesheet">

    <link href="<%request.getContextPath();%>/static/css/reset.css" rel="stylesheet">
    <link href="<%request.getContextPath();%>/static/css/font.css" rel="stylesheet">
    <link href="<%request.getContextPath();%>/static/css/style.css?ver=<%=System.currentTimeMillis()%>" rel="stylesheet">
    <link href="<%request.getContextPath();%>/static/css/responsive.css" rel="stylesheet">

</head>

<body>

<script>
    window.onpageshow = function(event){
        if(event.persisted || (window.performance && window.performance.navigation.type === 2)){
            window.location.reload();
        }
    }
</script>

<c:if test="${status ne 'logon'}">
    <script>
        alert("로그인해 주세요.");
        location.href = '/member/login.do';
    </script>
</c:if>

<c:if test="${status eq 'logon'}">

    <c:import url="../header.jsp" charEncoding="UTF-8"/>

    <!-- container -->
    <div id="container">

        <!-- sub_top -->
        <div class="sub_top sub_top_my">
            <div class="inner">
                <div class="sub_top_nav">
                    <span class="home"><img src="<%request.getContextPath();%>/static/img/icon_home_mini.png" alt="홈 아이콘"></span>
                    <span>마이페이지</span>
                    <span>교육이력조회</span>
                </div>
                <h2 class="sub_top_title">교육이력조회</h2>
            </div>
        </div>
        <!-- //sub_top -->

        <!-- content_wrap -->
        <div id="content_wrap">
            <!-- sidebar -->
            <div id="sidebar">
                <div class="title">마이페이지</div>
                <ul class="lnb">
                    <li class="on"><a href="/mypage/eduApplyInfo.do">교육이력조회</a></li>
                    <li><a href="/mypage/resume.do">나의 이력서</a></li>
                    <li><a href="/mypage/post.do">나의 게시글</a></li>
                    <li><a href="/mypage/modify.do">회원 정보</a></li>
                </ul>
            </div>
            <!-- //sidebar -->

            <!-- content -->
            <div id="content" class="sub_mypage">
                <div class="my_edu_wrap">

                    <!-- sub_tab_btn -->
                    <ul class="sub_tab_btn">
                        <li class="on"><a href="/mypage/eduApplyInfo.do">교육 신청 정보</a></li>
                        <li><a href="/mypage/eduPayInfo.do">결제 내역</a></li>
                    </ul>
                    <!-- //sub_tab_btn -->

                    <!-- my_edu_list_wrap -->
                    <div class="my_edu_list_wrap">
                        <div class="sub_box_tit">
                            <div class="big">교육 신청 내역</div>
                        </div>
                        <div class="my_edu_list">
                            <ul class="list_head">
                                <li>
                                    <div class="number">번호</div>
                                    <div class="subject">교육명</div>
                                    <div class="state">신청현황</div>
                                    <div class="modify">신청서 수정</div>
                                </li>
                            </ul>
                            <ul class="list_body">
                                <c:if test="${not empty eduApplyInfoList}">
                                    <c:forEach var="eduApplyInfo" items="${eduApplyInfoList}" begin="0" end="${eduApplyInfoList.size()}" step="1" varStatus="status">
                                        <li>
                                            <div class="number">${eduApplyInfo.rownum}</div>
                                            <div class="subject">
                                                <a>${eduApplyInfo.trainName}</a>
                                                <div class="edu_period">${eduApplyInfo.trainStartDttm} ~ ${eduApplyInfo.trainEndDttm}</div>
                                                <%--<div class="edu_time">00:00 ~ 00:00</div>--%>
                                            </div>
                                            <div class="state">
                                                <c:choose>
                                                    <c:when test="${eduApplyInfo.trainName eq '상시신청' and eduApplyInfo.payStatus eq '결제완료'}">
                                                        상시신청
                                                    </c:when>
                                                    <c:otherwise>
                                                        ${eduApplyInfo.payStatus}
                                                    </c:otherwise>
                                                </c:choose>
                                                <c:if test="${eduApplyInfo.payStatus eq '결제대기'}">
                                                    </br>
                                                    <a href="javascript:void(0);" onclick="f_main_apply_continue_payment('${eduApplyInfo.seq}', '${eduApplyInfo.trainSeq}', '${memberInfo.name}', '${memberInfo.phone}', '${memberInfo.email}')" class="btn_modify_2">이어서 결제</a>
                                                </c:if>
                                            </div>
                                            <div class="modify">
                                                <input type="hidden" name="changeYn" value="${eduApplyInfo.changeYn}">
                                                <a href="javascript:void(0);" value="${eduApplyInfo.seq}" data-value="${eduApplyInfo.payMethod}" data-status="${eduApplyInfo.payStatus}" class="btn_cancel form_cancel_edu_btn">취소</a>
                                                <a href="javascript:void(0);" onclick="f_edu_apply_modify_btn('${eduApplyInfo.trainStartDttm}', '${eduApplyInfo.trainName}', '${eduApplyInfo.seq}')" class="btn_modify">수정</a>
                                            </div>
                                        </li>
                                    </c:forEach>
                                </c:if>
                                <c:if test="${empty eduApplyInfoList}">
                                    <li>
                                        신청한 교육 없음
                                    </li>
                                </c:if>
                            </ul>
                        </div>
                    </div>
                    <!-- //my_edu_list_wrap -->

                    <!-- my_edu_list_wrap -->
                    <div class="my_edu_list_wrap">
                        <div class="sub_box_tit">
                            <div class="big">교육 취소 내역</div>
                        </div>
                        <div class="my_edu_list">
                            <ul class="list_head">
                                <li>
                                    <div class="number">번호</div>
                                    <div class="subject">교육명</div>
                                    <div class="state" style="flex-basis: 150px;">신청현황</div>
                                </li>
                            </ul>
                            <ul class="list_body">
                                <c:if test="${not empty eduApplyInfoCancelList}">
                                    <c:forEach var="eduApplyInfoCancel" items="${eduApplyInfoCancelList}" begin="0" end="${eduApplyInfoCancelList.size()}" step="1" varStatus="status">
                                        <li>
                                            <div class="number">${eduApplyInfoCancel.rownum}</div>
                                            <div class="subject">
                                                <a>${eduApplyInfoCancel.trainName}</a>
                                                <div class="edu_period">${eduApplyInfoCancel.trainStartDttm} ~ ${eduApplyInfoCancel.trainEndDttm}</div>
                                                    <%--<div class="edu_time">00:00 ~ 00:00</div>--%>
                                            </div>
                                            <div class="state" style="flex-basis: 150px;">${eduApplyInfoCancel.payStatus}</div>
                                        </li>
                                    </c:forEach>
                                </c:if>
                                <c:if test="${empty eduApplyInfoCancelList}">
                                    <li>
                                        취소한 교육 없음
                                    </li>
                                </c:if>
                            </ul>
                        </div>
                    </div>
                    <!-- //my_edu_list_wrap -->

                    <!-- popupCancelEdu -->
                    <div class="popup" id="popupCancelEdu">
                        <div class="popup_inner popup_form">
                            <div class="popup_box popup_form">
                                <div class="box_1">
                                    <div class="tit_box">교육 취소</div>
                                    <div class="text_box">[ <span class="train_name"></span> ]을 신청하셨습니다.<br>정말로 취소하시겠습니까?</div>
                                    <div class="cmnt_box"><span style="color: #C00000">취소 사유를 10자 이상 입력해 주세요!</span></div>
                                    <div class="input_box">
                                        <input type="text" placeholder="취소 사유 10자 이상 입력" class="cancel_edu_reason">
                                    </div>
                                    <div class="refund_account_box">
                                        <div class="input_box" style="text-align: left;">
                                            <select id="cancel_edu_bank_select">
                                                <option value="" selected disabled>환불계좌은행</option>
                                                <option value="04">KB국민</option>
                                                <option value="03">IBK기업</option>
                                                <option value="11">NH농협</option>
                                                <option value="88">신한</option>
                                                <option value="53">씨티</option>
                                                <option value="23">SC제일</option>
                                                <option value="20">우리</option>
                                                <option value="71">우체국</option>
                                                <option value="45">새마을금고</option>
                                                <option value="48">신협</option>
                                                <option value="81">하나</option>
                                                <option value="50">저축</option>
                                                <option value="90">카카오뱅크</option>
                                                <option value="89">케이뱅크</option>
                                                <option value="92">토스뱅크</option>
                                                <option value="39">경남</option>
                                                <option value="34">광주</option>
                                                <option value="31">대구</option>
                                                <option value="32">부산</option>
                                                <option value="07">수협</option>
                                                <option value="37">전북</option>
                                                <option value="35">제주</option>
                                            </select>
                                        </div>
                                        <div class="input_box">
                                            <input type="text" id="cancel_edu_bank_customer_name" placeholder="환불계좌 예금주명 입력">
                                        </div>
                                        <div class="input_box">
                                            <input type="text" id="cancel_edu_bank_number" class="onlyNum" placeholder="환불계좌번호 입력">
                                        </div>
                                    </div>
                                    <div class="btn_box">
                                        <a href="javascript:void(0);" class="btnSt03 btn_prev">이전</a>
                                        <a href="javascript:void(0);" class="btnSt04 btn_next edu_cancel_btn">확인</a>
                                    </div>
                                </div>
                                <div class="box_2">
                                    <div class="text_box">
                                        취소 신청이 접수되었습니다.<br>
                                        담당자 승인 후 2주 이내<br>
                                        교육비 환불 기준에 따라 취소됩니다.<br>
                                        취소 확정 여부는 추후 마이페이지를 통해<br>
                                        확인하실 수 있습니다.
                                    </div>
                                    <div class="btn_box">
                                        <a href="javascript:void(0);" class="btnSt04 btn_confirm">확인</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- //popupCancelEdu -->

                    <!-- popupPaySel -->
                    <div class="popup" id="popupPaySel">
                        <div class="popup_inner popup_form">
                            <div class="popup_box popup_form">
                                <div class="box_1">
                                    <div class="tit_box">결제 수단 선택</div>
                                    <div class="text_box">결제 수단을 선택해 주세요</div>
                                    <div class="pay_select_box">
                                        <div class="input_box" style="text-align: left;">
                                            <input type="hidden" id="tableSeq" value="">
                                            <input type="hidden" id="trainSeq" value="">
                                            <input type="hidden" id="buyername" value="">
                                            <input type="hidden" id="buyertel" value="">
                                            <input type="hidden" id="buyeremail" value="">
                                            <select id="pay_select" style="width: 100%">
                                                <option value="" selected disabled>결제 수단</option>
                                                <option value="CARD">신용카드</option>
                                                <option value="VBANK">가상계좌(무통장입금)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="btn_box">
                                        <a href="javascript:void(0);" class="btnSt03 btn_prev">취소</a>
                                        <a href="javascript:void(0);" class="btnSt04" onclick="f_main_apply_payment_mobile(this);">확인</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- //popupPaySel -->

                </div>
            </div>
            <!-- //content -->

        </div>
        <!-- content_wrap -->

    </div>
    <!-- //container -->

    <c:import url="../footer.jsp" charEncoding="UTF-8"/>

<script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.all.min.js"></script>

<script src="<%request.getContextPath();%>/static/js/jquery-3.6.0.min.js"></script>
<script src="<%request.getContextPath();%>/static/js/jquery-migrate-3.3.0.js"></script>
<script src="<%request.getContextPath();%>/static/js/jquery.cookie.min.js"></script>

<script src="<%request.getContextPath();%>/static/js/script.js?ver=<%=System.currentTimeMillis()%>"></script>
<script src="<%request.getContextPath();%>/static/js/swiper.js"></script>
<script src="<%request.getContextPath();%>/static/js/form.js?ver=<%=System.currentTimeMillis()%>"></script>
<script src="<%request.getContextPath();%>/static/js/smsNoti.js?ver=<%=System.currentTimeMillis()%>"></script>
<script src="<%request.getContextPath();%>/static/js/main.js?ver=<%=System.currentTimeMillis()%>"></script>

</c:if>

<script>
    $(function(){
        let pc_payResInfo_resultCode = '${payResInfo.resultCode}';
        let pc_payResInfo_resultMsg = '${payResInfo.resultMsg}';
        let mo_payResInfo_resultCode = '${payResInfo.p_STATUS}';
        let mo_payResInfo_resultMsg = '${payResInfo.p_RMESG1}';
        if(nvl(pc_payResInfo_resultCode,'') !== '' || nvl(mo_payResInfo_resultCode,'') !== ''){

            if(pc_payResInfo_resultCode === "0000" || mo_payResInfo_resultCode === "00"){
                Swal.fire({
                    title: '[교육 신청 결제 완료]',
                    html: '교육 신청 결제가 완료되었습니다.<br>상세 내역은 마이페이지에서 확인 가능합니다.',
                    icon: 'info',
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: '확인'
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = '/mypage/eduApplyInfo.do'; // 목록으로 이동
                    }
                });
                return false;
            }else{
                let code = nvl(pc_payResInfo_resultCode,'') === '' ? mo_payResInfo_resultCode : pc_payResInfo_resultCode;
                let msg = nvl(pc_payResInfo_resultMsg,'') === '' ? mo_payResInfo_resultMsg : pc_payResInfo_resultMsg;
                showMessage('', 'error', '[교육 신청 결제 실패]', '교육 신청 결제가 실패하였습니다.<br>오류메시지 : [' + code + '] ' + msg, '');
            }

        }

    })
</script>
</body>
</html>