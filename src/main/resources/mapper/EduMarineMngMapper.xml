<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mtf.edumarine.mapper.EduMarineMngMapper">

    <select id="login" parameterType="com.mtf.edumarine.dto.AdminDTO" resultType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.login */
        SELECT seq
             , login_yn
             , valid_yn
             , gbn
             , id
             , password
             , ip_address
             , cp_name
             , cp_phone
             , note
        FROM admin
        WHERE id = #{id}
          AND del_yn = 'N'
    </select>

    <select id="selectAdminMngList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAdminMngList */
        SELECT seq
             , gbn
             , block_yn
             , access_menu
             , ip_address
             , id
             , password
             , cp_name
             , cp_tel
             , cp_phone
             , cp_email
             , cp_depart
             , note
             , last_access_dttm
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM admin
        WHERE 1=1
          AND del_yn = 'N'
          AND gbn != '슈퍼'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAME"'>
                AND cp_name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "TEL"'>
                AND cp_tel LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "PHONE"'>
                AND cp_phone LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "EMAIL"'>
                AND cp_email LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='blockYn != null and blockYn != "" and blockYn == "Y" '>
            AND block_yn = #{blockYn}
        </if>
        ORDER BY gbn desc, init_regi_dttm desc
    </select>

    <select id="selectAdminMngSingle" parameterType="com.mtf.edumarine.dto.AdminDTO" resultType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAdminMngSingle */
        SELECT seq
             , gbn
             , block_yn
             , access_menu
             , ip_address
             , id
             , password
             , cp_name
             , cp_tel
             , cp_phone
             , cp_email
             , cp_depart
             , note
             , last_access_dttm
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM admin
        WHERE seq = #{seq}
    </select>

    <select id="selectAdminMngSingleId" parameterType="com.mtf.edumarine.dto.AdminDTO" resultType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAdminMngSingleId */
        SELECT seq
             , gbn
             , block_yn
             , access_menu
             , ip_address
             , id
             , password
             , cp_name
             , cp_tel
             , cp_phone
             , cp_email
             , cp_depart
             , note
             , last_access_dttm
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM admin
        WHERE id = #{id}
        AND del_yn = 'N'
    </select>

    <select id="selectAdminMngCheckDuplicateId" parameterType="com.mtf.edumarine.dto.AdminDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAdminMngCheckDuplicateId */
        SELECT COUNT(1)
        FROM admin
        WHERE id = #{id}
          AND del_yn = 'N'
    </select>

    <update id="updateAdminMng" parameterType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateAdminMng */
        UPDATE admin
        SET gbn = #{gbn}
          , cp_name = #{cpName}
          , cp_tel = #{cpTel}
          , cp_phone = #{cpPhone}
          , cp_email = #{cpEmail}
          , block_yn = #{blockYn}
          , ip_address = #{ipAddress}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getAdminSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getAdminSeq */
        SELECT CONCAT('A', LPAD(nextval('admin_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertAdminMng" parameterType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertAdminMng */
        INSERT INTO admin
        ( seq
        , gbn
        , block_yn
        , access_menu
        , ip_address
        , id
        , password
        , cp_name
        , cp_tel
        , cp_phone
        , cp_email
        , cp_depart
        , last_access_dttm
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{gbn}
            , #{blockYn}
            , #{accessMenu}
            , #{ipAddress}
            , #{id}
            , <![CDATA[#{password}]]>
            , #{cpName}
            , #{cpTel}
            , #{cpPhone}
            , #{cpEmail}
            , #{cpDepart}
            , #{lastAccessDttm}
            , 'N'
            , #{note}
            , #{initRegiPic}
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , #{finalRegiPic}
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateAdminMngLoginYn" parameterType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateAdminMngLoginYn */
        UPDATE admin
        SET login_yn = #{loginYn}
        <if test='loginYn eq "Y"'>
            , last_access_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateAdminMngValidYn" parameterType="com.mtf.edumarine.dto.AdminDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateAdminMngValidYn */
        UPDATE admin
        SET valid_yn = #{validYn}
        WHERE seq = #{seq}
    </update>

    <select id="selectNoticeList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectNoticeList */
        SELECT seq
             , notice_gbn
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM notice
        WHERE 1=1
            AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "CONTENTS"'>
                AND content LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ALL"'>
                AND ( title LIKE BINARY CONCAT('%',#{searchText},'%') OR content LIKE BINARY CONCAT('%',#{searchText},'%') )
            </if>
        </if>
        <if test='gbn != null and gbn != ""'>
            AND notice_gbn = #{gbn}
        </if>
        ORDER BY notice_gbn desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectNoticeSingle" parameterType="com.mtf.edumarine.dto.NoticeDTO" resultType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectNoticeSingle */
        SELECT seq
             , notice_gbn
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM notice
        WHERE seq = #{seq}
    </select>

    <delete id="deleteNotice" parameterType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteNotice */
        DELETE FROM notice
        WHERE seq = #{seq}
    </delete>

    <update id="updateNotice" parameterType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateNotice */
        UPDATE notice
        SET notice_gbn = #{noticeGbn}
          , title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getNoticeSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getNoticeSeq */
        SELECT CONCAT('N', LPAD(nextval('notice_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertNotice" parameterType="com.mtf.edumarine.dto.NoticeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertNotice */
        INSERT INTO notice
        ( seq
        , notice_gbn
        , title
        , content
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{noticeGbn}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'NOTICE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'NOTICE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectPressList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPressList */
        SELECT seq
             , notice_gbn
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM press
        WHERE 1=1
            AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "CONTENTS"'>
                AND content LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ALL"'>
                AND ( title LIKE BINARY CONCAT('%',#{searchText},'%') OR content LIKE BINARY CONCAT('%',#{searchText},'%') )
            </if>
        </if>
        <if test='gbn != null and gbn != ""'>
            AND notice_gbn = #{gbn}
        </if>
        ORDER BY notice_gbn desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectPressSingle" parameterType="com.mtf.edumarine.dto.PressDTO" resultType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPressSingle */
        SELECT seq
             , notice_gbn
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM press
        WHERE seq = #{seq}
    </select>

    <delete id="deletePress" parameterType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deletePress */
        DELETE FROM press
        WHERE seq = #{seq}
    </delete>

    <update id="updatePress" parameterType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePress */
        UPDATE press
        SET notice_gbn = #{noticeGbn}
          , title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getPressSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getPressSeq */
        SELECT CONCAT('P', LPAD(nextval('press_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertPress" parameterType="com.mtf.edumarine.dto.PressDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertPress */
        INSERT INTO press
        ( seq
        , notice_gbn
        , title
        , content
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{noticeGbn}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'PRESS'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'PRESS'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectGalleryList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectGalleryList */
        SELECT seq
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM gallery
        WHERE 1=1
          AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY write_date desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectGallerySingle" parameterType="com.mtf.edumarine.dto.GalleryDTO" resultType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectGallerySingle */
        SELECT seq
             , title
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM gallery
        WHERE seq = #{seq}
    </select>

    <delete id="deleteGallery" parameterType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteGallery */
        DELETE FROM gallery
        WHERE seq = #{seq}
    </delete>

    <update id="updateGallery" parameterType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateGallery */
        UPDATE gallery
        SET title = <![CDATA[#{title}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getGallerySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getGallerySeq */
        SELECT CONCAT('G', LPAD(nextval('gallery_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertGallery" parameterType="com.mtf.edumarine.dto.GalleryDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertGallery */
        INSERT INTO gallery
        ( seq
        , title
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{title}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'GALLERY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'GALLERY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectMediaList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectMediaList */
        SELECT seq
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM media
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY write_date desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectMediaSingle" parameterType="com.mtf.edumarine.dto.MediaDTO" resultType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectMediaSingle */
        SELECT seq
             , title
             , writer
             , write_date
             , view_cnt
             , media_url
             , media_key
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM media
        WHERE seq = #{seq}
    </select>

    <delete id="deleteMedia" parameterType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteMedia */
        DELETE FROM media
        WHERE seq = #{seq}
    </delete>

    <update id="updateMedia" parameterType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateMedia */
        UPDATE media
        SET title = <![CDATA[#{title}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
          , media_url = <![CDATA[#{mediaUrl}]]>
          , media_key = #{mediaKey}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getMediaSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getMediaSeq */
        SELECT CONCAT('M', LPAD(nextval('media_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertMedia" parameterType="com.mtf.edumarine.dto.MediaDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertMedia */
        INSERT INTO media
        ( seq
        , title
        , writer
        , write_date
        , media_url
        , media_key
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{title}]]>
            , #{writer}
            , #{writeDate}
            , #{mediaUrl}
            , #{mediaKey}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'MEDIA'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'MEDIA'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectNewsletterList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectNewsletterList */
        SELECT seq
             , notice_gbn
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM newsletter
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='gbn != null and gbn != ""'>
            AND notice_gbn = #{gbn}
        </if>
        ORDER BY notice_gbn desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectNewsletterSingle" parameterType="com.mtf.edumarine.dto.NewsletterDTO" resultType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectNewsletterSingle */
        SELECT seq
             , notice_gbn
             , title
             , content_gbn
             , content
             , content_ta
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM newsletter
        WHERE seq = #{seq}
    </select>

    <delete id="deleteNewsletter" parameterType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteNewsletter */
        DELETE FROM newsletter
        WHERE seq = #{seq}
    </delete>

    <update id="updateNewsletter" parameterType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateNewsletter */
        UPDATE newsletter
        SET notice_gbn = #{noticeGbn}
          , title = <![CDATA[#{title}]]>
          , content_gbn = #{contentGbn}
          , content = <![CDATA[#{content}]]>
          , content_ta = <![CDATA[#{contentTa}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getNewsletterSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getNewsletterSeq */
        SELECT CONCAT('L', LPAD(nextval('newsletter_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertNewsletter" parameterType="com.mtf.edumarine.dto.NewsletterDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertNewsletter */
        INSERT INTO newsletter
        ( seq
        , notice_gbn
        , title
        , content_gbn
        , content
        , content_ta
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{noticeGbn}
            , <![CDATA[#{title}]]>
            , #{contentGbn}
            , <![CDATA[#{content}]]>
            , <![CDATA[#{contentTa}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'NEWSLETTER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'NEWSLETTER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectAnnouncementList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.AnnouncementDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAnnouncementList */
        SELECT seq
             , lang
             , notice_gbn
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM announcement
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            AND title LIKE BINARY CONCAT('%',#{searchText},'%')
        </if>
        <if test='condition != null and condition != ""'>
            AND lang = #{condition}
        </if>
        ORDER BY notice_gbn desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectAnnouncementSingle" parameterType="com.mtf.edumarine.dto.AnnouncementDTO" resultType="com.mtf.edumarine.dto.AnnouncementDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAnnouncementSingle */
        SELECT seq
             , lang
             , notice_gbn
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM announcement
        WHERE seq = #{seq}
    </select>

    <delete id="deleteAnnouncement" parameterType="com.mtf.edumarine.dto.AnnouncementDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteAnnouncement */
        DELETE FROM announcement
        WHERE seq = #{seq}
    </delete>

    <update id="updateAnnouncement" parameterType="com.mtf.edumarine.dto.AnnouncementDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateAnnouncement */
        UPDATE announcement
        SET lang = #{lang}
          , notice_gbn = #{noticeGbn}
          , title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getAnnouncementSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getAnnouncementSeq */
        SELECT CONCAT('A', LPAD(nextval('announcement_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertAnnouncement" parameterType="com.mtf.edumarine.dto.AnnouncementDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertAnnouncement */
        INSERT INTO announcement
        ( seq
        , lang
        , notice_gbn
        , title
        , content
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{lang}
            , #{noticeGbn}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'ANNOUNCE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'ANNOUNCE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectJobList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectJobList */
        SELECT seq
             , title
             , writer
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM job
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY write_date desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectJobSingle" parameterType="com.mtf.edumarine.dto.JobDTO" resultType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectJobSingle */
        SELECT seq
             , title
             , content
             , writer
             , write_date
             , view_cnt
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM job
        WHERE seq = #{seq}
    </select>

    <delete id="deleteJob" parameterType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteJob */
        DELETE FROM job
        WHERE seq = #{seq}
    </delete>

    <update id="updateJob" parameterType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateJob */
        UPDATE job
        SET title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getJobSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getJobSeq */
        SELECT CONCAT('J', LPAD(nextval('job_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertJob" parameterType="com.mtf.edumarine.dto.JobDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertJob */
        INSERT INTO job
        ( seq
        , title
        , content
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , #{writer}
            , #{writeDate}
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'JOB'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'JOB'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectEmploymentList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.EmploymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectEmploymentList */
        SELECT seq
             , gbn
             , employ_name
             , employ_ceo
             , employ_year
             , employ_field
             , employ_address
             , employ_address_detail
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM employment
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "employmentName"'>
                AND employ_name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='gbn != null and gbn != ""'>
            AND gbn = #{gbn}
        </if>
        ORDER BY gbn, init_regi_dttm desc
    </select>

    <select id="selectEmploymentSingle" parameterType="com.mtf.edumarine.dto.EmploymentDTO" resultType="com.mtf.edumarine.dto.EmploymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectEmploymentSingle */
        SELECT seq
             , gbn
             , employ_name
             , employ_ceo
             , employ_year
             , employ_field
             , employ_address
             , employ_address_detail
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM employment
        WHERE seq = #{seq}
    </select>

    <update id="updateEmployment" parameterType="com.mtf.edumarine.dto.EmploymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateEmployment */
        UPDATE employment
        SET gbn = #{gbn}
          , employ_name = <![CDATA[#{employName}]]>
          , employ_ceo = #{employCeo}
          , employ_year = #{employYear}
          , employ_field = #{employField}
          , employ_address = <![CDATA[#{employAddress}]]>
          , employ_address_detail = <![CDATA[#{employAddressDetail}]]>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getEmploymentSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getEmploymentSeq */
        SELECT CONCAT('EP', LPAD(nextval('employment_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertEmployment" parameterType="com.mtf.edumarine.dto.EmploymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertEmployment */
        INSERT INTO employment
        ( seq
        , gbn
        , employ_name
        , employ_ceo
        , employ_year
        , employ_field
        , employ_address
        , employ_address_detail
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{gbn}
            , <![CDATA[#{employName}]]>
            , #{employCeo}
            , #{employYear}
            , #{employField}
            , <![CDATA[#{employAddress}]]>
            , <![CDATA[#{employAddressDetail}]]>
            , 'N'
            , #{note}
            , 'EMPLOYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'EMPLOYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectCommunityList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectCommunityList */
        SELECT seq
             , gbn
             , title
             , writer
             , writer_key
             , write_date
             , final_regi_dttm
             , view_cnt
        FROM community
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='gbn != null and gbn != ""'>
            AND gbn = #{gbn}
        </if>
        ORDER BY write_date desc, init_regi_dttm desc, title asc
    </select>

    <select id="selectCommunitySingle" parameterType="com.mtf.edumarine.dto.CommunityDTO" resultType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectCommunitySingle */
        SELECT seq
             , gbn
             , title
             , content
             , hashtag
             , writer
             , writer_key
             , write_date
             , recommend_cnt
             , view_cnt
             , file_id_list
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM community
        WHERE seq = #{seq}
    </select>

    <delete id="deleteCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteCommunity */
        DELETE FROM community
        WHERE seq = #{seq}
    </delete>

    <update id="updateCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateCommunity */
        UPDATE community
        SET gbn = #{gbn}
          , title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
          , hashtag = <![CDATA[#{hashtag}]]>
          , recommend_cnt = #{recommendCnt}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getCommunitySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getCommunitySeq */
        SELECT CONCAT('C', LPAD(nextval('community_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertCommunity" parameterType="com.mtf.edumarine.dto.CommunityDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertCommunity */
        INSERT INTO community
        ( seq
        , gbn
        , title
        , content
        , hashtag
        , writer
        , writer_key
        , write_date
        , recommend_cnt
        , view_cnt
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{gbn}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , <![CDATA[#{hashtag}]]>
            , #{writer}
            , #{writerKey}
            , #{writeDate}
            , #{recommendCnt}
            , 0
            , <![CDATA[#{fileIdList}]]>
            , 'N'
            , #{note}
            , 'COMMUNITY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'COMMUNITY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectFaqList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.FaqDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectFaqList */
        SELECT seq
             , question
             , answer
             , writer
             , write_date
             , exposure_yn
             , exposure_seq
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM faq
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "QUESTION"'>
                AND question LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='exposureYn != null and exposureYn != ""'>
            AND exposure_yn = #{exposureYn}
        </if>
        ORDER BY write_date desc, init_regi_dttm desc, question asc
    </select>

    <select id="selectFaqSingle" parameterType="com.mtf.edumarine.dto.FaqDTO" resultType="com.mtf.edumarine.dto.FaqDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectFaqSingle */
        SELECT seq
             , question
             , answer
             , writer
             , write_date
             , exposure_yn
             , exposure_seq
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM faq
        WHERE seq = #{seq}
    </select>

    <update id="updateFaq" parameterType="com.mtf.edumarine.dto.FaqDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateFaq */
        UPDATE faq
        SET exposure_yn = #{exposureYn}
          , question = <![CDATA[#{question}]]>
          , answer = <![CDATA[#{answer}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getFaqSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getFaqSeq */
        SELECT CONCAT('Q', LPAD(nextval('faq_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertFaq" parameterType="com.mtf.edumarine.dto.FaqDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertFaq */
        INSERT INTO faq
        ( seq
        , question
        , answer
        , writer
        , write_date
        , exposure_yn
        , exposure_seq
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{question}]]>
            , <![CDATA[#{answer}]]>
            , #{writer}
            , #{writeDate}
            , #{exposureYn}
            , 0
            , 'N'
            , #{note}
            , 'FAQ'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'FAQ'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectPopupList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPopupList */
        SELECT seq
             , use_yn
             , title
             , published_date
             , expiration_date
             , width_px
             , left_px
             , top_px
             , align
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM popup
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='useYn != null and useYn != "" and useYn == "Y"'>
            AND use_yn = #{useYn}
        </if>
        ORDER BY published_date DESC, expiration_date DESC
    </select>

    <select id="selectPopupSingle" parameterType="com.mtf.edumarine.dto.PopupDTO" resultType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPopupSingle */
        SELECT seq
             , use_yn
             , title
             , published_date
             , expiration_date
             , width_px
             , height_px
             , left_px
             , top_px
             , align
             , writer
             , content
             , link_url
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM popup
        WHERE seq = #{seq}
    </select>

    <delete id="deletePopup" parameterType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deletePopup */
        DELETE FROM popup
        WHERE seq = #{seq}
    </delete>

    <update id="updatePopup" parameterType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePopup */
        UPDATE popup
        SET use_yn = #{useYn}
          , title = #{title}
          , published_date = #{publishedDate}
          , expiration_date = #{expirationDate}
          , width_px = #{widthPx}
          , height_px = #{heightPx}
          , left_px = #{leftPx}
          , top_px = #{topPx}
          , align = #{align}
          , writer = #{writer}
          , content = <![CDATA[#{content}]]>
          , link_url = <![CDATA[#{linkUrl}]]>
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getPopupSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getPopupSeq */
        SELECT CONCAT('P', LPAD(nextval('popup_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertPopup" parameterType="com.mtf.edumarine.dto.PopupDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePopup */
        INSERT INTO popup
        ( seq
        , use_yn
        , title
        , published_date
        , expiration_date
        , width_px
        , left_px
        , top_px
        , align
        , writer
        , content
        , link_url
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{useYn}
            , #{title}
            , #{publishedDate}
            , #{expirationDate}
            , #{widthPx}
            , #{leftPx}
            , #{topPx}
            , #{align}
            , #{writer}
            , <![CDATA[#{content}]]>
            , <![CDATA[#{linkUrl}]]>
            , 'N'
            , #{note}
            , 'POPUP'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'POPUP'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="getActivePopupCount" parameterType="com.mtf.edumarine.dto.PopupDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getActivePopupCount */
        SELECT COUNT(*)
        FROM popup
        WHERE 1=1
          AND del_yn = 'N'
          AND use_yn = #{useYn}
          AND (published_date <![CDATA[<=]]> #{today}
            AND expiration_date <![CDATA[>=]]> #{today})
    </select>

    <select id="selectBannerList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBannerList */
        SELECT seq
             , title
             , view_seq
             , writer
             , write_date
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM banner
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "TITLE"'>
                AND title LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY view_seq , write_date DESC
    </select>

    <select id="selectBannerSingle" parameterType="com.mtf.edumarine.dto.BannerDTO" resultType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBannerSingle */
        SELECT seq
             , title
             , view_seq
             , writer
             , write_date
             , file_id_list
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM banner
        WHERE seq = #{seq}
    </select>

    <delete id="deleteBanner" parameterType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteBanner */
        DELETE FROM banner
        WHERE seq = #{seq}
    </delete>

    <update id="updateBanner" parameterType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBanner */
        UPDATE banner
        SET title = #{title}
          , view_seq = #{viewSeq}
          , writer = #{writer}
          , write_date = #{writeDate}
        <if test='fileIdList != null and fileIdList != ""'>
            , file_id_list = <![CDATA[#{fileIdList}]]>
        </if>
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getBannerSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getBannerSeq */
        SELECT CONCAT('B', LPAD(nextval('banner_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertBanner" parameterType="com.mtf.edumarine.dto.BannerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertBanner */
        INSERT INTO banner
        ( seq
        , title
        , view_seq
        , writer
        , write_date
        , file_id_list
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{title}
            , #{viewSeq}
            , #{writer}
            , #{writeDate}
            , #{fileIdList}
            , 'N'
            , #{note}
            , 'BANNER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'BANNER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectMemberList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectMemberList */
        SELECT seq
             , apply_status
             , id
             , password
             , grade
             , name
             , name_en
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , sex
             , address
             , address_detail
             , keyword
             , sms_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM member
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAME"'>
                AND name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ID"'>
                AND id LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='grade != null and grade != ""'>
            AND grade = #{grade}
        </if>
        <if test='sex != null and sex != ""'>
            AND sex = #{sex}
        </if>
        <if test='keyword != null and keyword != ""'>
            AND keyword LIKE CONCAT('%',#{keyword}, '%')
        </if>
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="selectMemberSingle" parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectMemberSingle */
        SELECT seq
             , apply_status
             , id
             , salt
             , password
             , grade
             , name
             , name_en
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , sex
             , address
             , address_detail
             , keyword
             , sms_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM member
        WHERE seq = #{seq}
    </select>

    <delete id="deleteMember" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteMember */
        DELETE FROM member
        WHERE seq = #{seq}
    </delete>

    <update id="updateMember" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateMember */
        UPDATE member
        SET apply_status = #{applyStatus}
          , grade = #{grade}
          , name = #{name}
          , name_en = #{nameEn}
          , phone = #{phone}
          , birth_year = #{birthYear}
          , birth_month = #{birthMonth}
          , birth_day = #{birthDay}
          , sex = #{sex}
          , address = #{address}
          , address_detail = <![CDATA[#{addressDetail}]]>
          , email = #{email}
          , keyword = #{keyword}
          , sms_yn = #{smsYn}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getMemberSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getMemberSeq */
        SELECT CONCAT('V', LPAD(nextval('member_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertMember" parameterType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertMember */
        INSERT INTO member
        ( seq
        , apply_status
        , id
        , password
        , grade
        , name
        , name_en
        , phone
        , birth_year
        , birth_month
        , birth_day
        , sex
        , address
        , address_detail
        , email
        , keyword
        , sms_yn
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , '회원'
            , #{id}
            , <![CDATA[#{password}]]>
            , #{grade}
            , #{name}
            , #{nameEn}
            , #{phone}
            , #{birthYear}
            , #{birthMonth}
            , #{birthDay}
            , #{sex}
            , #{address}
            , <![CDATA[#{addressDetail}]]>
            , #{email}
            , #{keyword}
            , #{smsYn}
            , 'N'
            , #{note}
            , 'MEMBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'MEMBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectResumeList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.ResumeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectResumeList */
        SELECT rst.*
        FROM ( SELECT r.seq
             , r.member_seq
             , r.id
             , IFNULL(r.name_ko, m.name) as nameKo
             , IFNULL(r.name_en, m.name_en) as nameEn
             , IFNULL(r.phone, m.phone) as phone
             , IFNULL(r.email, m.email) as email
             , IFNULL(r.birth_year, m.birth_year) as birthYear
             , IFNULL(r.birth_month, m.birth_month) as birthMonth
             , IFNULL(r.birth_day, m.birth_day) as birthDay
             , IFNULL(r.sex, m.sex) as sex
             , IFNULL(r.address, m.address) as address
             , IFNULL(r.address_detail, m.address_detail) as addressDetail
             , r.top_clothes_size
             , r.bottom_clothes_size
             , r.shoes_size
             , r.participation_path
             , r.del_yn
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM resume r
        LEFT JOIN member m
        ON r.member_seq = m.seq
        WHERE 1=1
          AND r.del_yn = 'N' ) rst
          WHERE 1=1
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAMEKO"'>
                AND rst.nameKo LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "NAMEEN"'>
                AND rst.nameEn LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ID"'>
                AND rst.id LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='sex != null and sex != ""'>
            AND rst.sex = #{sex}
        </if>
        ORDER BY rst.init_regi_dttm DESC
    </select>

    <select id="selectResumeSingle" parameterType="com.mtf.edumarine.dto.ResumeDTO" resultType="com.mtf.edumarine.dto.ResumeDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectResumeSingle */
        SELECT r.seq
             , r.member_seq
             , r.id
             , IFNULL(r.name_ko, m.name) as nameKo
             , IFNULL(r.name_en, m.name_en) as nameEn
             , IFNULL(r.phone, m.phone) as phone
             , IFNULL(r.email, m.email) as email
             , IFNULL(r.birth_year, m.birth_year) as birthYear
             , IFNULL(r.birth_month, m.birth_month) as birthMonth
             , IFNULL(r.birth_day, m.birth_day) as birthDay
             , IFNULL(r.sex, m.sex) as sex
             , IFNULL(r.address, m.address) as address
             , IFNULL(r.address_detail, m.address_detail) as addressDetail
             , r.top_clothes_size
             , r.bottom_clothes_size
             , r.shoes_size
             , r.participation_path
             , r.del_yn
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM resume r
        LEFT JOIN member m
        ON r.member_seq = m.seq
        WHERE 1=1
          AND r.del_yn = 'N'
          AND r.seq = #{seq}
    </select>

    <select id="selectRegularList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectRegularList */
        SELECT r.seq
             , r.member_seq
             , r.train_seq
             , m.grade
             , m.id
             , r.name
             , m.name_en
             , r.phone
             , r.email
             , r.age_group
             , r.region
             , r.participation_path
             , r.first_application_field
             , r.second_application_field
             , r.desired_education_time
             , r.major
             , r.experience_yn
             , r.recommend_person
             , r.apply_status
             , r.cancel_dttm
             , r.cancel_reason
             , r.del_yn
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM regular r
        LEFT JOIN member m
        ON r.member_seq = m.seq
        WHERE 1=1
        AND r.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAME"'>
                  AND r.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND r.apply_status = #{applyStatus}
        </if>
        <if test='experienceYn != null and experienceYn != ""'>
            AND r.experience_yn = #{experienceYn}
        </if>
        ORDER BY m.grade IS NULL, r.major IS NULL, r.name
    </select>

    <select id="selectRegularSingle" parameterType="com.mtf.edumarine.dto.RegularDTO" resultType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectRegularSingle */
        SELECT r.seq
             , r.member_seq
             , r.train_seq
             , m.grade
             , m.id
             , r.name
             , m.name_en
             , r.phone
             , r.email
             , m.birth_year
             , m.birth_month
             , m.birth_day
             , r.age_group
             , r.region
             , r.participation_path
             , r.first_application_field
             , r.second_application_field
             , r.desired_education_time
             , r.major
             , r.experience_yn
             , r.recommend_person
             , r.apply_status
             , r.cancel_dttm
             , r.cancel_reason
             , r.del_yn
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM regular r
        LEFT JOIN member m
        ON r.member_seq = m.seq
        WHERE r.seq = #{seq}
    </select>

    <delete id="deleteRegular" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteRegular */
        DELETE FROM regular
        WHERE seq = #{seq}
    </delete>

    <update id="updateRegular" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateRegular */
        UPDATE regular
        SET region = #{region}
          , participation_path = #{participationPath}
          , first_application_field = #{firstApplicationField}
          , second_application_field = #{secondApplicationField}
          , third_application_field = #{thirdApplicationField}
          , desired_education_time = #{desiredEducationTime}
          , major = #{major}
          , experience_yn = #{experienceYn}
          , recommend_person = #{recommendPerson}
          , apply_status = #{applyStatus}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getRegularSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getRegularSeq */
        SELECT CONCAT('U', LPAD(nextval('regular_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertRegular" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertRegular */
        INSERT INTO regular
        ( seq
        , member_seq
        , train_seq
        , region
        , participation_path
        , first_application_field
        , second_application_field
        , third_application_field
        , desired_education_time
        , major
        , experience_yn
        , recommend_person
        , apply_status
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{region}
            , #{participationPath}
            , #{firstApplicationField}
            , #{secondApplicationField}
            , #{thirdApplicationField}
            , #{desiredEducationTime}
            , #{major}
            , #{experienceYn}
            , #{recommendPerson}
            , #{applyStatus}
            , 'N'
            , #{note}
            , 'REGULAR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'REGULAR'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateRegularApplyStatus" parameterType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateRegularApplyStatus */
        UPDATE regular
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectBoarderList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBoarderList */
        SELECT b.seq
             , b.member_seq
             , b.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, b.name_ko) as nameKo
             , IFNULL(m.name_en, b.name_en) as nameEn
             , IFNULL(m.phone, b.phone) as phone
             , IFNULL(m.email, b.email) as email
             , b.top_clothes_size
             , b.bottom_clothes_size
             , b.shoes_size
             , b.participation_path
             , b.grade_gbn
             , b.school_name
             , b.major
             , b.military_gbn
             , b.military_reason
             , b.disabled_gbn
             , b.job_support_gbn
             , b.tech_edu_gbn
             , b.tech_edu_name
             , b.apply_reason
             , b.tech_reason
             , b.activity_reason
             , b.plan_reason
             , b.etc_reason
             , b.apply_status
             , b.cancel_dttm
             , b.cancel_reason
             , b.del_yn
             , b.note
             , b.init_regi_pic
             , b.init_regi_dttm
             , b.final_regi_pic
             , b.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = b.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = b.seq) as cancelGbn
             , t.next_time
        FROM boarder b
        LEFT JOIN member m
        ON b.member_seq = m.seq
        LEFT JOIN train t
        ON b.train_seq = t.seq
        WHERE 1=1
          AND b.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND b.name_ko LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND b.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND b.apply_status = #{applyStatus}
        </if>
        <if test='jobSupportYn != null and jobSupportYn != ""'>
            AND b.job_support_gbn = #{jobSupportYn}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, b.name_ko
    </select>

    <select id="selectBoarderSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBoarderSingle */
        SELECT seq
             , member_seq
             , train_seq
             , id
             , top_clothes_size
             , bottom_clothes_size
             , shoes_size
             , participation_path
             , grade_gbn
             , school_name
             , major
             , military_gbn
             , military_reason
             , disabled_gbn
             , job_support_gbn
             , tech_edu_gbn
             , tech_edu_name
             , apply_reason
             , tech_reason
             , activity_reason
             , plan_reason
             , etc_reason
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM boarder
        WHERE seq = #{seq}
    </select>

    <select id="selectCareerList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.CareerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectCareerList */
        SELECT seq
             , boarder_seq
             , member_seq
             , train_seq
             , career_place
             , career_date
             , career_position
             , career_task
             , career_location
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM career
        WHERE boarder_seq = #{boarderSeq}
    </select>

    <select id="selectLicenseList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.LicenseDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectLicenseList */
        SELECT seq
             , boarder_seq
             , member_seq
             , train_seq
             , license_name
             , license_date
             , license_org
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM license
        WHERE boarder_seq = #{boarderSeq}
    </select>

    <update id="updateTrainApplyCnt" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateTrainApplyCnt */
        UPDATE train
        SET train_apply_cnt = train_apply_cnt - 1
        WHERE seq = #{seq}
        AND train_apply_cnt <![CDATA[>]]> 0
    </update>

    <update id="updateTrainApplyCntAdd" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateTrainApplyCntAdd */
        UPDATE train
        SET train_apply_cnt = train_apply_cnt + 1
        WHERE seq = #{seq}
          AND train_apply_cnt <![CDATA[<]]> train_cnt
    </update>

    <update id="updateBoarderApplyStatus" parameterType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBoarderApplyStatus */
        UPDATE boarder
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectFrpList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectFrpList */
        SELECT f.seq
             , f.member_seq
             , f.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, f.name_ko) as nameKo
             , IFNULL(m.name_en, f.name_en) as nameEn
             , IFNULL(m.phone, f.phone) as phone
             , IFNULL(m.email, f.email) as email
             , f.top_clothes_size
             , f.bottom_clothes_size
             , f.shoes_size
             , f.participation_path
             , f.grade_gbn
             , f.school_name
             , f.major
             , f.military_gbn
             , f.military_reason
             , f.disabled_gbn
             , f.job_support_gbn
             , f.know_path
             , f.know_path_reason
             , f.apply_reason
             , f.tech_reason
             , f.activity_reason
             , f.plan_reason
             , f.etc_reason
             , f.apply_status
             , f.cancel_dttm
             , f.cancel_reason
             , f.del_yn
             , f.note
             , f.init_regi_pic
             , f.init_regi_dttm
             , f.final_regi_pic
             , f.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = f.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = f.seq) as cancelGbn
             , t.next_time
        FROM frp f
        LEFT JOIN member m
        on f.member_seq = m.seq
        LEFT JOIN train t
        ON f.train_seq = t.seq
        WHERE 1=1
          AND f.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND f.apply_status = #{applyStatus}
        </if>
        <if test='jobSupportYn != null and jobSupportYn != ""'>
            AND f.job_support_gbn = #{jobSupportYn}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, f.name_ko
    </select>

    <select id="selectFrpSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectFrpSingle */
        SELECT seq
             , member_seq
             , train_seq
             , id
             , top_clothes_size
             , bottom_clothes_size
             , shoes_size
             , participation_path
             , grade_gbn
             , school_name
             , major
             , military_gbn
             , military_reason
             , disabled_gbn
             , job_support_gbn
             , know_path
             , know_path_reason
             , apply_reason
             , tech_reason
             , activity_reason
             , plan_reason
             , etc_reason
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM frp
        WHERE seq = #{seq}
    </select>

    <update id="updateFrpApplyStatus" parameterType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateFrpApplyStatus */
        UPDATE frp
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectBasicList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBasicList */
        SELECT b.seq
             , b.member_seq
             , b.train_seq
             , m.grade
             , m.id
             , b.boarder_gbn
             , IFNULL(m.name, b.name_ko) as nameKo
             , IFNULL(m.name_en, b.name_en) as nameEn
             , IFNULL(m.phone, b.phone) as phone
             , IFNULL(m.email, b.email) as email
             , b.clothes_size
             , b.participation_path
             , b.apply_status
             , b.cancel_dttm
             , b.cancel_reason
             , b.del_yn
             , b.note
             , b.init_regi_pic
             , b.init_regi_dttm
             , b.final_regi_pic
             , b.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = b.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = b.seq) as cancelGbn
             , t.next_time
        FROM basic b
        LEFT JOIN member m
        ON b.member_seq = m.seq
        LEFT JOIN train t
        ON b.train_seq = t.seq
        WHERE 1=1
          AND b.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND b.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        <if test='boarderGbn != null and boarderGbn != ""'>
            AND b.boarder_gbn = #{boarderGbn}
        </if>
        ORDER BY m.grade IS NULL, b.name_ko
    </select>

    <select id="selectBasicSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectBasicSingle */
        SELECT seq
             , member_seq
             , train_seq
             , boarder_gbn
             , clothes_size
             , participation_path
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM basic
        WHERE seq = #{seq}
    </select>

    <update id="updateBasicApplyStatus" parameterType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBasicApplyStatus */
        UPDATE basic
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectEmergencyList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectEmergencyList */
        SELECT e.seq
             , e.member_seq
             , e.train_seq
             , m.grade
             , m.id
             , e.boarder_gbn
             , IFNULL(m.name, e.name_ko) as nameKo
             , IFNULL(m.name_en, e.name_en) as nameEn
             , IFNULL(m.phone, e.phone) as phone
             , IFNULL(m.email, e.email) as email
             , e.clothes_size
             , e.participation_path
             , e.apply_status
             , e.cancel_dttm
             , e.cancel_reason
             , e.del_yn
             , e.note
             , e.init_regi_pic
             , e.init_regi_dttm
             , e.final_regi_pic
             , e.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = e.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = e.seq) as cancelGbn
             , t.next_time
        FROM emergency e
        LEFT JOIN member m
        ON e.member_seq = m.seq
        LEFT JOIN train t
        ON e.train_seq = t.seq
        WHERE 1=1
          AND e.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND e.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        <if test='boarderGbn != null and boarderGbn != ""'>
            AND e.boarder_gbn = #{boarderGbn}
        </if>
        ORDER BY m.grade IS NULL, e.name_ko
    </select>

    <select id="selectEmergencySingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectEmergencySingle */
        SELECT seq
             , member_seq
             , train_seq
             , boarder_gbn
             , clothes_size
             , participation_path
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM emergency
        WHERE seq = #{seq}
    </select>

    <update id="updateEmergencyApplyStatus" parameterType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBasicApplyStatus */
        UPDATE emergency
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectOutboarderList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectOutboarderList */
        SELECT o.seq
             , o.member_seq
             , o.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, o.name_ko) as nameKo
             , IFNULL(m.name_en, o.name_en) as nameEn
             , IFNULL(m.phone, o.phone) as phone
             , IFNULL(m.email, o.email) as email
             , o.clothes_size
             , o.participation_path
             , o.apply_status
             , o.cancel_dttm
             , o.cancel_reason
             , o.del_yn
             , o.note
             , o.init_regi_pic
             , o.init_regi_dttm
             , o.final_regi_pic
             , o.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = o.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = o.seq) as cancelGbn
             , t.next_time
        FROM outboarder o
        LEFT JOIN member m
        ON o.member_seq = m.seq
        LEFT JOIN train t
        ON o.train_seq = t.seq
        WHERE 1=1
          AND o.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND o.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, o.name_ko
    </select>

    <select id="selectOutboarderSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectOutboarderSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM outboarder
        WHERE seq = #{seq}
    </select>

    <update id="updateOutboarderApplyStatus" parameterType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateOutboarderApplyStatus */
        UPDATE outboarder
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectInboarderList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectInboarderList */
        SELECT i.seq
             , i.member_seq
             , i.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, i.name_ko) as nameKo
             , IFNULL(m.name_en, i.name_en) as nameEn
             , IFNULL(m.phone, i.phone) as phone
             , IFNULL(m.email, i.email) as email
             , i.clothes_size
             , i.participation_path
             , i.apply_status
             , i.cancel_dttm
             , i.cancel_reason
             , i.del_yn
             , i.note
             , i.init_regi_pic
             , i.init_regi_dttm
             , i.final_regi_pic
             , i.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = i.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = i.seq) as cancelGbn
             , t.next_time
        FROM inboarder i
        LEFT JOIN member m
        ON i.member_seq = m.seq
        LEFT JOIN train t
        ON i.train_seq = t.seq
        WHERE 1=1
          AND i.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND i.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, i.name_ko
    </select>

    <select id="selectInboarderSingle" parameterType="com.mtf.edumarine.dto.InboarderDTO" resultType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectInboarderSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM inboarder
        WHERE seq = #{seq}
    </select>

    <delete id="deleteInboarder" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteInboarder */
        DELETE FROM inboarder
        WHERE seq = #{seq}
    </delete>

    <update id="updateInboarder" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateInboarder */
        UPDATE inboarder
        SET clothes_size = #{clothesSize}
          , participation_path = #{participationPath}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getInboarderSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getInboarderSeq */
        SELECT CONCAT('I', LPAD(nextval('inboarder_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertInboarder" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertInboarder */
        INSERT INTO inboarder
        ( seq
        , clothes_size
        , participation_path
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{clothesSize}
            , #{participationPath}
            , 'N'
            , #{note}
            , 'INBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'INBOARDER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateInboarderApplyStatus" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateInboarderApplyStatus */
        UPDATE inboarder
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectSailyachtList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSailyachtList */
        SELECT s.seq
             , s.member_seq
             , s.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, s.name_ko) as nameKo
             , IFNULL(m.name_en, s.name_en) as nameEn
             , IFNULL(m.phone, s.phone) as phone
             , IFNULL(m.email, s.email) as email
             , s.clothes_size
             , s.participation_path
             , s.apply_status
             , s.cancel_dttm
             , s.cancel_reason
             , s.del_yn
             , s.note
             , s.init_regi_pic
             , s.init_regi_dttm
             , s.final_regi_pic
             , s.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = s.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = s.seq) as cancelGbn
             , t.next_time
        FROM sailyacht s
        LEFT JOIN member m
        ON s.member_seq = m.seq
        LEFT JOIN train t
        ON s.train_seq = t.seq
        WHERE 1=1
          AND s.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND s.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, s.name_ko
    </select>

    <select id="selectSailyachtSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSailyachtSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM sailyacht
        WHERE seq = #{seq}
    </select>

    <update id="updateSailyachtApplyStatus" parameterType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSailyachtApplyStatus */
        UPDATE sailyacht
        SET apply_status = #{applyStatus}
          <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
          </if>
          <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectHighhorsepowerList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighhorsepowerList */
        SELECT h.seq
             , h.member_seq
             , h.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, h.name_ko) as nameKo
             , IFNULL(m.name_en, h.name_en) as nameEn
             , IFNULL(m.phone, h.phone) as phone
             , IFNULL(m.email, h.email) as email
             , h.clothes_size
             , h.participation_path
             , h.train_understand
             , h.train_understand_etc
             , h.recommend_person
             , h.apply_status
             , h.cancel_dttm
             , h.cancel_reason
             , h.del_yn
             , h.note
             , h.init_regi_pic
             , h.init_regi_dttm
             , h.final_regi_pic
             , h.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = h.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = h.seq) as cancelGbn
             , t.next_time
        FROM highhorsepower h
        LEFT JOIN member m
        ON h.member_seq = m.seq
        LEFT JOIN train t
        ON h.train_seq = t.seq
        WHERE 1=1
          AND h.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND h.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, h.name_ko
    </select>

    <select id="selectHighhorsepowerSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighhorsepowerSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , train_understand
             , train_understand_etc
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM highhorsepower
        WHERE seq = #{seq}
    </select>

    <update id="updateHighhorsepowerApplyStatus" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighhorsepowerApplyStatus */
        UPDATE highhorsepower
        SET apply_status = #{applyStatus}
        <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectHighSelfList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighSelfList */
        SELECT e.seq
             , e.member_seq
             , e.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, e.name_ko) as nameKo
             , IFNULL(m.name_en, e.name_en) as nameEn
             , IFNULL(m.phone, e.phone) as phone
             , IFNULL(m.email, e.email) as email
             , e.clothes_size
             , e.participation_path
             , e.train_understand
             , e.train_understand_etc
             , e.recommend_person
             , e.apply_status
             , e.cancel_dttm
             , e.cancel_reason
             , e.del_yn
             , e.note
             , e.init_regi_pic
             , e.init_regi_dttm
             , e.final_regi_pic
             , e.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = e.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = e.seq) as cancelGbn
             , t.next_time
        FROM highself e
        LEFT JOIN member m
        ON e.member_seq = m.seq
        LEFT JOIN train t
        ON e.train_seq = t.seq
        WHERE 1=1
          AND e.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND e.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, e.name_ko
    </select>

    <select id="selectHighSelfSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighSelfSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , train_understand
             , train_understand_etc
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM highself
        WHERE seq = #{seq}
    </select>

    <update id="updateHighSelfApplyStatus" parameterType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighSelfApplyStatus */
        UPDATE highself
        SET apply_status = #{applyStatus}
        <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectHighSpecialList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighSpecialList */
        SELECT c.seq
        , c.member_seq
        , c.train_seq
        , m.grade
        , m.id
        , IFNULL(m.name, c.name_ko) as nameKo
        , IFNULL(m.name_en, c.name_en) as nameEn
        , IFNULL(m.phone, c.phone) as phone
        , IFNULL(m.email, c.email) as email
        , c.apply_status
        , c.cancel_dttm
        , c.cancel_reason
        , c.del_yn
        , c.note
        , c.init_regi_pic
        , c.init_regi_dttm
        , c.final_regi_pic
        , c.final_regi_dttm
        , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = c.seq) as payMethod
        , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = c.seq) as cancelGbn
        , t.next_time
        FROM highspecial c
        LEFT JOIN member m
        ON c.member_seq = m.seq
        LEFT JOIN train t
        ON c.train_seq = t.seq
        WHERE 1=1
        AND c.del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAMEKO"'>
                AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "NAMEEN"'>
                AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ID"'>
                AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND c.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, c.name_ko
    </select>

    <select id="selectHighSpecialSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectHighSpecialSingle */
        SELECT seq
             , member_seq
             , train_seq
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM highspecial
        WHERE seq = #{seq}
    </select>

    <update id="updateHighSpecialApplyStatus" parameterType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighSpecialApplyStatus */
        UPDATE highspecial
        SET apply_status = #{applyStatus}
        <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectSterndriveList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSterndriveList */
        SELECT s.seq
             , s.member_seq
             , s.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, s.name_ko) as nameKo
             , IFNULL(m.name_en, s.name_en) as nameEn
             , IFNULL(m.phone, s.phone) as phone
             , IFNULL(m.email, s.email) as email
             , s.clothes_size
             , s.participation_path
             , s.train_understand
             , s.train_understand_etc
             , s.recommend_person
             , s.apply_status
             , s.cancel_dttm
             , s.cancel_reason
             , s.del_yn
             , s.note
             , s.init_regi_pic
             , s.init_regi_dttm
             , s.final_regi_pic
             , s.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = s.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = s.seq) as cancelGbn
             , t.next_time
        FROM sterndrive s
        LEFT JOIN member m
        ON s.member_seq = m.seq
        LEFT JOIN train t
        ON s.train_seq = t.seq
        WHERE 1=1
          AND s.del_yn = 'N'
          <if test='searchText != null and searchText != ""'>
              <if test='condition eq "NAMEKO"'>
                  AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "NAMEEN"'>
                  AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
              <if test='condition eq "ID"'>
                  AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
              </if>
          </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND s.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, s.name_ko
    </select>

    <select id="selectSterndriveSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSterndriveSingle */
        SELECT seq
             , member_seq
             , train_seq
             , clothes_size
             , participation_path
             , train_understand
             , train_understand_etc
             , recommend_person
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM sterndrive
        WHERE seq = #{seq}
    </select>

    <update id="updateSterndriveApplyStatus" parameterType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSterndriveApplyStatus */
        UPDATE sterndrive
        SET apply_status = #{applyStatus}
        <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectSternSpecialList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSternSpecialList */
        SELECT ss.seq
             , ss.member_seq
             , ss.train_seq
             , m.grade
             , m.id
             , IFNULL(m.name, ss.name_ko) as nameKo
             , IFNULL(m.name_en, ss.name_en) as nameEn
             , IFNULL(m.phone, ss.phone) as phone
             , IFNULL(m.email, ss.email) as email
             , ss.apply_status
             , ss.cancel_dttm
             , ss.cancel_reason
             , ss.del_yn
             , ss.note
             , ss.init_regi_pic
             , ss.init_regi_dttm
             , ss.final_regi_pic
             , ss.final_regi_dttm
             , (SELECT p.pay_method from payment p where p.member_seq = m.seq and p.table_seq = ss.seq) as payMethod
             , (SELECT p.cancel_gbn from payment p where p.member_seq = m.seq and p.table_seq = ss.seq) as cancelGbn
             , t.next_time
        FROM sternspecial ss
        LEFT JOIN member m
        ON ss.member_seq = m.seq
        LEFT JOIN train t
        ON ss.train_seq = t.seq
        WHERE 1=1
        AND ss.del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAMEKO"'>
                AND m.name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "NAMEEN"'>
                AND m.name_en LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "ID"'>
                AND m.id LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND ss.apply_status = #{applyStatus}
        </if>
        <if test='time != null and time != ""'>
            AND t.next_time = #{time}
        </if>
        ORDER BY m.grade IS NULL, ss.name_ko
    </select>

    <select id="selectSternSpecialSingle" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSternSpecialSingle */
        SELECT seq
             , member_seq
             , train_seq
             , apply_status
             , cancel_dttm
             , cancel_reason
             , refund_bank_code
             , refund_bank_name
             , refund_bank_customer_name
             , refund_bank_number
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
             , (SELECT t.next_time FROM train t WHERE t.seq = train_seq) AS nextTime
        FROM sternspecial
        WHERE seq = #{seq}
    </select>

    <update id="updateSternSpecialApplyStatus" parameterType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSternSpecialApplyStatus */
        UPDATE sternspecial
        SET apply_status = #{applyStatus}
        <if test='applyStatus eq "취소신청"'>
            , cancel_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        </if>
        <if test='cancelReason != null and cancelReason != ""'>
            , cancel_reason = #{cancelReason}
        </if>
        , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectTrainList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectTrainList */
        SELECT seq
             , gbn
             , gbn_depth
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
             , train_note
             , exposure_yn
             , schedule_exposure_yn
             , closing_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM train
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAME"'>
                AND gbn LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='time != null and time != ""'>
            AND next_time = #{time}
        </if>
        <if test='category != null and category != ""'>
            AND category = #{category}
        </if>
        <if test='gbn != null and gbn != ""'>
            AND gbn = #{gbn}
        </if>
        <if test='gbnDepth != null and gbnDepth != ""'>
            AND gbn_depth = #{gbnDepth}
        </if>
        ORDER BY train_start_dttm desc, init_regi_dttm DESC
    </select>

    <select id="selectTrainSingle" parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectTrainSingle */
        SELECT seq
             , gbn
             , gbn_depth
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
             , train_note
             , exposure_yn
             , schedule_exposure_yn
             , closing_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM train
        WHERE seq = #{seq}
    </select>

    <delete id="deleteTrain" parameterType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteTrain */
        DELETE FROM train
        WHERE seq = #{seq}
    </delete>

    <update id="updateTrain" parameterType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateTrain */
        UPDATE train
        SET train_start_dttm = <![CDATA[#{trainStartDttm}]]>
          , train_end_dttm = <![CDATA[#{trainEndDttm}]]>
          , apply_start_dttm = <![CDATA[#{applyStartDttm}]]>
          , apply_end_dttm = <![CDATA[#{applyEndDttm}]]>
          , pay_sum = #{paySum}
          , train_cnt = #{trainCnt}
          , train_note = <![CDATA[#{trainNote}]]>
          , exposure_yn = #{exposureYn}
          , schedule_exposure_yn = #{scheduleExposureYn}
          , closing_yn = #{closingYn}
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateTrainEarlyClosingYn" parameterType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateTrainEarlyClosingYn */
        UPDATE train
        SET closing_yn = #{closingYn}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getTrainSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getTrainSeq */
        SELECT CONCAT('T', LPAD(nextval('train_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertTrain" parameterType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertTrain */
        INSERT INTO train
        ( seq
        , gbn
        , gbn_depth
        , category
        , train_start_dttm
        , train_end_dttm
        , apply_start_dttm
        , apply_end_dttm
        , pay_sum
        , train_cnt
        , train_apply_cnt
        , next_time
        , train_note
        , exposure_yn
        , schedule_exposure_yn
        , closing_yn
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{gbn}
            , #{gbnDepth}
            , #{category}
            , <![CDATA[#{trainStartDttm}]]>
            , <![CDATA[#{trainEndDttm}]]>
            , <![CDATA[#{applyStartDttm}]]>
            , <![CDATA[#{applyEndDttm}]]>
            , #{paySum}
            , #{trainCnt}
            , 0
            , #{nextTime}
            , <![CDATA[#{trainNote}]]>
            , #{exposureYn}
            , #{scheduleExposureYn}
            , 'N'
            , 'N'
            , #{note}
            , 'TRAIN'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'TRAIN'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectPaymentList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPaymentList */
        SELECT r.seq
             , r.member_seq
             , r.memberName
             , r.memberPhone
             , r.train_seq
             , r.nextTime
             , r.trainName
             , r.pay_sum
             , r.pay_method
             , r.pay_status
             , r.cancel_date
             , r.cancel_time
             , r.prtc_date
             , r.prtc_time
             , r.del_yn
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM ( SELECT p.seq
                    , p.member_seq
                    , ( SELECT m.name
                        FROM member m
                        WHERE m.seq = p.member_seq) AS memberName
                    , ( SELECT m.phone
                        FROM member m
                        WHERE m.seq = p.member_seq) AS memberPhone
                    , p.train_seq
                    , ( SELECT t.next_time
                        FROM train t
                        WHERE t.seq = p.train_seq) AS nextTime
                    , ( SELECT t.gbn
                        FROM train t
                        WHERE t.seq = p.train_seq) AS trainName
                    , p.pay_sum
                    , p.pay_method
                    , p.pay_status
                    , p.cancel_date
                    , p.cancel_time
                    , p.prtc_date
                    , p.prtc_time
                    , p.del_yn
                    , p.note
                    , p.init_regi_pic
                    , p.init_regi_dttm
                    , p.final_regi_pic
                    , p.final_regi_dttm
               FROM payment p
               WHERE 1=1
                 AND p.del_yn = 'N'
               ) r
        WHERE 1=1
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAME"'>
                AND r.memberName LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "PHONE"'>
                AND r.memberPhone LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='applyStatus != null and applyStatus != ""'>
            AND r.pay_status = #{applyStatus}
        </if>
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectPaymentSingle" parameterType="com.mtf.edumarine.dto.PaymentDTO" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPaymentSingle */
        SELECT p.seq
             , p.member_seq
             , (select m.name
                from member m
                where m.seq = p.member_seq) as memberName
             , (select m.phone
                from member m
                where m.seq = p.member_seq) as memberPhone
             , p.train_seq
             , (select t.gbn
                from train t
                where t.seq = p.train_seq) as trainName
             , p.pay_sum
             , p.pay_status
             , p.refund_reason
             , p.vact_bank_name
             , p.vact_num
             , p.vact_name
             , p.vact_date
             , p.vact_time
             , p.del_yn
             , p.note
             , p.init_regi_pic
             , p.init_regi_dttm
             , p.final_regi_pic
             , p.final_regi_dttm
        FROM payment p
        WHERE p.seq = #{seq}
    </select>

    <select id="selectPaymentTableSeq" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectPaymentTableSeq */
        SELECT seq
             , member_seq
             , member_name
             , member_phone
             , table_seq
             , train_seq
             , train_name
             , buyer_name
             , buyer_tel
             , buyer_email
             , cust_email
             , pay_sum
             , tot_price
             , good_name
             , goods_name
             , pay_status
             , appl_date
             , appl_time
             , moid
             , mid
             , tid
             , appl_num
             , auth_signature
             , event_code
             , pay_method
             , currency
             , p_fn_nm
             , card_num
             , card_code
             , card_corp_flag
             , card_member_num
             , card_appl_price
             , card_point
             , card_quota
             , card_purchase_code
             , card_prtc_code
             , card_check_flag
             , card_bank_code
             , card_terminal_num
             , card_use_point
             , card_interest
             , card_src_code
             , card_gwcode
             , card_purchase_name
             , pay_device
             , vact_date
             , vact_time
             , vact_name
             , vact_input_name
             , vact_bank_code
             , vact_bank_name
             , vact_num
             , result_code
             , result_msg
             , refund_reason
             , cancel_gbn
             , cancel_date
             , cancel_time
             , prtc_date
             , prtc_time
             , cancel_tid
             , prtc_price
             , prtc_remains
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM payment
        WHERE table_seq = #{tableSeq}
    </select>

    <delete id="deletePayment" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deletePayment */
        DELETE FROM payment
        WHERE seq = #{seq}
    </delete>

    <update id="updatePayment" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePayment */
        UPDATE payment
        SET pay_status = #{payStatus}
            <if test='refundReason != null and refundReason != ""'>
          , refund_reason = <![CDATA[#{refundReason}]]>
            </if>
          , note = #{note}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectTrainPaymentInfo" parameterType="com.mtf.edumarine.dto.PaymentDTO" resultType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectTrainPaymentInfo */
        SELECT seq
             , member_seq
             , member_name
             , member_phone
             , table_seq
             , train_seq
             , train_name
             , buyer_name
             , buyer_tel
             , buyer_email
             , cust_email
             , pay_sum
             , tot_price
             , good_name
             , goods_name
             , pay_status
             , appl_date
             , appl_time
             , moid
             , mid
             , tid
             , appl_num
             , auth_signature
             , event_code
             , pay_method
             , currency
             , p_fn_nm
             , card_num
             , card_code
             , card_corp_flag
             , card_member_num
             , card_appl_price
             , card_point
             , card_quota
             , card_purchase_code
             , card_prtc_code
             , card_check_flag
             , card_bank_code
             , card_terminal_num
             , card_use_point
             , card_interest
             , card_src_code
             , card_gwcode
             , card_purchase_name
             , pay_device
             , vact_date
             , vact_time
             , vact_name
             , vact_input_name
             , vact_bank_code
             , vact_bank_name
             , vact_num
             , result_code
             , result_msg
             , refund_reason
             , cancel_gbn
             , cancel_date
             , cancel_time
             , prtc_date
             , prtc_time
             , cancel_tid
             , prtc_price
             , prtc_remains
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM payment
        WHERE member_seq = #{memberSeq}
        AND train_seq = #{trainSeq}
        AND table_seq = #{tableSeq}
    </select>

    <select id="getPaymentSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getPaymentSeq */
        SELECT CONCAT('Y', LPAD(nextval('payment_seq'), '7', '0'))
        FROM DUAL
    </select>

    <select id="selectMemberSeq"  parameterType="com.mtf.edumarine.dto.MemberDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectMemberSeq */
        SELECT seq
        FROM member
        WHERE name = #{name}
        AND phone = #{phone}
    </select>

    <select id="selectTrainSeq"  parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectTrainSeq */
        SELECT seq
        FROM train
        WHERE gbn = #{gbn}
        AND apply_start_dttm <![CDATA[<=]]> #{today}
        AND apply_end_dttm <![CDATA[>=]]> #{today}
    </select>

    <insert id="insertPayment" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertPayment */
        INSERT INTO payment
        ( seq
        , member_seq
        , train_seq
        , pay_sum
        , pay_status
        , refund_reason
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{memberSeq}
            , #{trainSeq}
            , #{paySum}
            , #{payStatus}
            , <![CDATA[#{refundReason}]]>
            , 'N'
            , #{note}
            , 'PAYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'PAYMENT'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updatePayStatus" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePayStatus */
        UPDATE payment
        SET pay_status = #{payStatus}
          , refund_reason = <![CDATA[#{refundReason}]]>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updatePaymentTrainChange" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePaymentTrainChange */
        UPDATE payment
        SET train_seq = #{trainSeq}
          , train_name = #{trainName}
          , good_name = <![CDATA[#{goodName}]]>
          , goods_name = <![CDATA[#{goodsName}]]>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE table_seq = #{tableSeq}
    </update>

    <update id="updatePaymentCancelResult" parameterType="com.mtf.edumarine.dto.PaymentDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updatePaymentCancelResult */
        UPDATE payment
        SET cancel_gbn = #{cancelGbn}
          <if test='cancelDate != null and cancelDate != ""'>
          , cancel_date = #{cancelDate}
          </if>
          <if test='cancelTime != null and cancelTime != ""'>
          , cancel_time = #{cancelTime}
          </if>
          <if test='prtcDate != null and prtcDate != ""'>
          , prtc_date = #{prtcDate}
          </if>
          <if test='prtcTime != null and prtcTime != ""'>
          , prtc_time = #{prtcTime}
          </if>
          <if test='cancelTid != null and cancelTid != ""'>
          , cancel_tid = #{cancelTid}
          </if>
          <if test='prtcPrice != null and prtcPrice != ""'>
          , prtc_price = #{prtcPrice}
          </if>
          <if test='prtcRemains != null and prtcRemains != ""'>
          , prtc_remains = #{prtcRemains}
          </if>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectSubscriberList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.SubscriberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSubscriberList */
        SELECT seq
             , email
             , name
             , phone
             , send_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM subscriber
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "EMAIL"'>
                AND email LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='sendYn != null and sendYn != "" and sendYn == "Y"'>
            AND send_yn = #{sendYn}
        </if>
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="selectSubscriberSingle" parameterType="com.mtf.edumarine.dto.SubscriberDTO" resultType="com.mtf.edumarine.dto.SubscriberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSubscriberSingle */
        SELECT seq
             , email
             , name
             , phone
             , send_yn
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM subscriber
        WHERE seq = #{seq}
    </select>

    <delete id="deleteSubscriber" parameterType="com.mtf.edumarine.dto.SubscriberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteSubscriber */
        DELETE FROM subscriber
        WHERE seq = #{seq}
    </delete>

    <update id="updateSubscriber" parameterType="com.mtf.edumarine.dto.SubscriberDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSubscriber */
        UPDATE subscriber
        SET email = <![CDATA[#{email}]]>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="checkSubscriber" parameterType="com.mtf.edumarine.dto.SubscriberDTO" resultType="java.lang.Integer">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.checkSubscriber */
        SELECT COUNT(1)
        FROM subscriber
        WHERE email = <![CDATA[#{email}]]>
        AND del_yn = 'N'
    </select>

    <select id="getSubscriberSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getSubscriberSeq */
        SELECT CONCAT('S', LPAD(nextval('subscriber_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSubscriber" parameterType="com.mtf.edumarine.dto.SubscriberDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertSubscriber */
        INSERT INTO subscriber
        ( seq
        , email
        , name
        , phone
        , send_yn
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{email}]]>
            , #{name}
            , #{phone}
            , #{sendYn}
            , 'N'
            , #{note}
            , 'SUBSCRIBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'SUBSCRIBER'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectSmsList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.SmsDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsList */
        SELECT seq
             , sms_group
             , phone
             , sender
             , sender_phone
             , send_date
             , content
             , send_result
             , template_seq
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM sms
        WHERE 1=1
        AND del_yn = 'N'
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "PHONE"'>
                AND phone LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "SENDERPHONE"'>
                AND sender_phone LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
            <if test='condition eq "CONTENT"'>
                AND content LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        <if test='result != null and result != ""'>
            AND send_result = #{result}
        </if>
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="selectSmsSingle" parameterType="com.mtf.edumarine.dto.SmsDTO" resultType="com.mtf.edumarine.dto.SmsDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSingle */
        SELECT seq
             , sms_group
             , phone
             , sender
             , sender_phone
             , send_date
             , content
             , send_result
             , template_seq
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM sms
        WHERE seq = #{seq}
    </select>

    <select id="getSmsSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getSmsSeq */
        SELECT CONCAT('D', LPAD(nextval('sms_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSms" parameterType="com.mtf.edumarine.dto.SmsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertSms */
        INSERT INTO sms
        ( seq
        , sms_group
        , phone
        , sender
        , sender_phone
        , send_date
        , content
        , send_result
        , template_seq
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{smsGroup}
            , #{phone}
            , #{sender}
            , #{senderPhone}
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , <![CDATA[#{content}]]>
            , #{sendResult}
            , #{templateSeq}
            , 'N'
            , #{note}
            , 'SMS'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'SMS'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteSms" parameterType="com.mtf.edumarine.dto.SmsDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteSms */
        DELETE FROM sms
        WHERE seq = #{seq}
    </delete>

    <select id="selectSmsTemplateList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.TemplateDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsTemplateList */
        SELECT seq
             , title
             , content
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM template
        WHERE 1=1
        AND del_yn = 'N'
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="selectSmsTemplateSingle" parameterType="com.mtf.edumarine.dto.TemplateDTO" resultType="com.mtf.edumarine.dto.TemplateDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsTemplateSingle */
        SELECT seq
             , title
             , content
             , del_yn
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM template
        WHERE seq = #{seq}
    </select>

    <update id="updateSmsTemplate" parameterType="com.mtf.edumarine.dto.TemplateDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSmsTemplate */
        UPDATE template
        SET title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="getSmsTemplateSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getSmsTemplateSeq */
        SELECT CONCAT('T', LPAD(nextval('template_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertSmsTemplate" parameterType="com.mtf.edumarine.dto.TemplateDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertSmsTemplate */
        INSERT INTO template
        ( seq
        , title
        , content
        , del_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , 'N'
            , #{note}
            , 'TEMPLATE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'TEMPLATE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteSmsTemplate" parameterType="com.mtf.edumarine.dto.TemplateDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteSmsTemplate */
        DELETE FROM template
        WHERE seq = #{seq}
    </delete>

    <select id="selectSmsSendRegularList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendRegularList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN regular r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendBoarderList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendBoarderList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN boarder r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendFrpList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendFrpList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN frp r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendBasicList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendBasicList */
        SELECT b.seq AS tableSeq
             , b.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = b.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , b.apply_status
        FROM `member` m
        JOIN basic b
        ON m.seq = b.member_seq
        WHERE b.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
          AND b.boarder_gbn = #{boarderGbn}
        ORDER BY b.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendEmergencyList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendEmergencyList */
        SELECT e.seq AS tableSeq
             , e.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = e.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , e.apply_status
        FROM `member` m
        JOIN emergency e
        ON m.seq = e.member_seq
        WHERE e.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
          AND e.boarder_gbn = #{boarderGbn}
        ORDER BY e.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendOutboarderList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendOutboarderList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN outboarder r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendInboarderList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendInboarderList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN inboarder r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendSailyachtList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendSailyachtList */
        SELECT r.seq AS tableSeq
             , r.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = r.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , r.apply_status
        FROM `member` m
        JOIN sailyacht r
        ON m.seq = r.member_seq
        WHERE r.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendHighhorsepowerList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendHighhorsepowerList */
        SELECT h.seq AS tableSeq
             , h.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = h.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , h.apply_status
        FROM `member` m
        JOIN highhorsepower h
        ON m.seq = h.member_seq
        WHERE h.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY h.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendHighSelfList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendHighSelfList */
        SELECT e.seq AS tableSeq
             , e.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = e.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , e.apply_status
        FROM `member` m
        JOIN highself e
        ON m.seq = e.member_seq
        WHERE e.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY e.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendHighSpecialList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendHighSpecialList */
        SELECT c.seq AS tableSeq
             , c.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = c.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , c.apply_status
        FROM `member` m
        JOIN highspecial c
        ON m.seq = c.member_seq
        WHERE c.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY c.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendSterndriveList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendSterndriveList */
        SELECT t.seq AS tableSeq
             , t.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = t.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , t.apply_status
        FROM `member` m
        JOIN sterndrive t
        ON m.seq = t.member_seq
        WHERE t.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY t.init_regi_dttm DESC
    </select>

    <select id="selectSmsSendSternSpecialList" resultType="com.mtf.edumarine.dto.SmsSendDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectSmsSendSternSpecialList */
        SELECT ss.seq AS tableSeq
             , ss.train_seq
             , ( SELECT t.next_time
                 FROM train t
                 WHERE t.seq = ss.train_seq ) as nextTime
             , m.seq AS memberSeq
             , m.id
             , m.name
             , m.phone
             , ss.apply_status
        FROM `member` m
        JOIN sternspecial ss
        ON m.seq = ss.member_seq
        WHERE ss.del_yn = 'N'
          AND m.del_yn = 'N'
          AND m.sms_yn = '1'
        ORDER BY ss.init_regi_dttm DESC
    </select>

    <select id="selectDownloadList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.DownloadDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectDownloadList */
        SELECT seq
             , download_file_name
             , download_reason
             , download_user
             , target_menu
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM download
        WHERE 1=1
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "NAME"'>
                AND download_file_name LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="getDownloadSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getDownloadSeq */
        SELECT CONCAT('W', LPAD(nextval('download_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertDownload" parameterType="com.mtf.edumarine.dto.DownloadDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertDownload */
        INSERT INTO download
        ( seq
        , download_file_name
        , target_menu
        , download_reason
        , download_user
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , <![CDATA[#{downloadFileName}]]>
            , <![CDATA[#{targetMenu}]]>
            , <![CDATA[#{downloadReason}]]>
            , <![CDATA[#{downloadUser}]]>
            , #{note}
            , 'DOWNLOAD'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'DOWNLOAD'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectTrashList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectTrashList */
        SELECT seq
             , target_seq
             , target_table
             , target_menu
             , delete_reason
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM trash
        WHERE 1=1
        <if test='searchText != null and searchText != ""'>
            <if test='condition eq "REASON"'>
                AND delete_reason LIKE BINARY CONCAT('%',#{searchText},'%')
            </if>
        </if>
        ORDER BY init_regi_dttm DESC
    </select>

    <select id="selectTrashSingle" parameterType="com.mtf.edumarine.dto.TrashDTO" resultType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectTrashSingle */
        SELECT seq
             , target_seq
             , target_table
             , target_menu
             , delete_reason
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM trash
        WHERE seq = #{seq}
    </select>
    
    <update id="updateTargetTableTrash" parameterType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.updateTargetTableTrash */
        UPDATE ${targetTable}
        SET del_yn = #{delYn}
        WHERE seq = #{targetSeq}
    </update>

    <select id="getTrashSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getTrashSeq */
        SELECT CONCAT('H', LPAD(nextval('trash_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertTrash" parameterType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertTrash */
        INSERT INTO trash
        ( seq
        , target_seq
        , target_table
        , target_menu
        , delete_reason
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{targetSeq}
            , #{targetTable}
            , <![CDATA[#{targetMenu}]]>
            , <![CDATA[#{deleteReason}]]>
            , #{note}
            , 'TRASH'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'TRASH'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteTrash" parameterType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteTrash */
        DELETE FROM trash
        WHERE seq = #{seq}
    </delete>

    <delete id="deleteTargetTableTrash" parameterType="com.mtf.edumarine.dto.TrashDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteTargetTableTrash */
        DELETE FROM ${targetTable}
        WHERE seq = #{targetSeq}
    </delete>

    <select id="getFileId" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.getFileId */
        SELECT CONCAT('F', LPAD(nextval('file_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertFileInfo" parameterType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertFileInfo */
        INSERT INTO file
        ( id
        , user_id
        , full_file_path
        , full_path
        , folder_path
        , full_file_name
        , uuid
        , file_name
        , file_yn
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{id}
            , #{userId}
            , <![CDATA[#{fullFilePath}]]>
            , <![CDATA[#{fullPath}]]>
            , <![CDATA[#{folderPath}]]>
            , <![CDATA[#{fullFileName}]]>
            , <![CDATA[#{uuid}]]>
            , <![CDATA[#{fileName}]]>
            , #{fileYn}
            , #{note}
            , 'FILE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'FILE'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <select id="selectFileUserIdList" parameterType="com.mtf.edumarine.dto.FileDTO" resultType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectFileUserIdList */
        SELECT id
             , user_id
             , full_file_path
             , full_path
             , folder_path
             , full_file_name
             , uuid
             , file_name
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM file
        WHERE user_id = #{userId}
          AND file_yn = 'Y'
    </select>

    <update id="updateFileUseN" parameterType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.updateFileUseN */
        UPDATE file
        SET file_yn = 'N'
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE id = #{id}
    </update>

    <update id="updateFileUserId" parameterType="com.mtf.edumarine.dto.FileDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.updateFileUserId */
        UPDATE file
        SET user_id = #{userId}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE id = #{id}
    </update>

    <select id="selectTrainNextTime" parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectTrainNextTime */
        SELECT next_time
        FROM train
        WHERE 1=1
        <if test='gbn != null and gbn != ""'>
        AND gbn = <![CDATA[#{gbn}]]>
        </if>
        GROUP BY next_time
        ORDER BY next_time
    </select>

    <select id="selectTrainActive" parameterType="com.mtf.edumarine.dto.TrainDTO" resultType="com.mtf.edumarine.dto.TrainDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectTrainActive */
        SELECT seq
             , gbn
             , category
             , train_start_dttm
             , train_end_dttm
             , apply_start_dttm
             , apply_end_dttm
             , pay_sum
             , train_cnt
             , train_apply_cnt
             , next_time
        FROM train
        WHERE closing_yn = 'N'
          AND del_yn = 'N'
          AND gbn = <![CDATA[#{gbn}]]>
          AND (
                (
                    (train_start_dttm <![CDATA[<=]]> DATE_FORMAT(NOW(), '%Y.%m.%d'))
                        AND (train_end_dttm <![CDATA[>=]]> DATE_FORMAT(NOW(), '%Y.%m.%d'))
                    )
                    OR
                (
                    (apply_start_dttm <![CDATA[<=]]> DATE_FORMAT(NOW(), '%Y.%m.%d'))
                        AND (apply_end_dttm <![CDATA[>=]]> DATE_FORMAT(NOW(), '%Y.%m.%d'))
                    )
            )
        ORDER BY apply_start_dttm, apply_end_dttm , train_start_dttm , train_end_dttm
    </select>

    <select id="selectExcelMemberDetailList" resultType="com.mtf.edumarine.dto.MemberDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelMemberDetailList */
        SELECT apply_status
             , id
             , grade
             , name
             , name_en
             , phone
             , email
             , birth_year
             , birth_month
             , birth_day
             , sex
             , address
             , address_detail
             , keyword
             , sms_yn
             , init_regi_dttm
             , final_regi_dttm
        FROM member
    </select>

    <select id="selectExcelRegularDetailList" resultType="com.mtf.edumarine.dto.RegularDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelRegularDetailList */
        SELECT rst.*
        FROM (SELECT r.seq,
                     IFNULL(m.apply_status, '-')          AS memberStatus,
                     IFNULL(m.id, '-')                    AS id,
                     r.member_seq,
                     r.train_seq,
                     IFNULL(r.name, m.name)               AS name,
                     m.name_en,
                     IFNULL(r.phone, m.phone)             AS phone,
                     IFNULL(r.email, m.email)             AS email,
                     IFNULL(r.birth_year, m.birth_year)   AS birthYear,
                     IFNULL(r.birth_month, m.birth_month) AS birthMonth,
                     IFNULL(r.birth_day, m.birth_day)     AS birthDay,
                     r.age_group,
                     r.region,
                     r.participation_path,
                     r.first_application_field,
                     r.second_application_field,
                     r.third_application_field,
                     r.desired_education_time,
                     r.major,
                     r.experience_yn,
                     r.recommend_person,
                     r.apply_status,
                     r.cancel_dttm,
                     r.cancel_reason,
                     r.del_yn,
                     r.note,
                     r.init_regi_pic,
                     r.init_regi_dttm,
                     r.final_regi_pic,
                     r.final_regi_dttm
              FROM regular r
              LEFT JOIN member m
              ON r.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.name
    </select>

    <select id="selectExcelBoarderDetailList" resultType="com.mtf.edumarine.dto.BoarderDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelBoarderDetailList */
        SELECT rst.*
        FROM (SELECT b.seq,
                     b.member_seq,
                     b.train_seq,
                     b.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(b.name_ko, m.name)                  AS nameKo,
                     IFNULL(b.name_en, m.name_en)               AS name_en,
                     IFNULL(b.phone, m.phone)                   AS phone,
                     IFNULL(b.email, m.email)                   AS email,
                     IFNULL(b.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(b.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(b.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(b.sex, m.sex)                       AS sex,
                     b.age,
                     IFNULL(b.address, m.address)               AS address,
                     IFNULL(b.address_detail, m.address_detail) AS addressDetail,
                     b.top_clothes_size,
                     b.bottom_clothes_size,
                     b.shoes_size,
                     b.participation_path,
                     b.grade_gbn,
                     b.school_name,
                     b.major,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_place, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = b.seq)              AS careerPlace,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_date, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = b.seq)              AS careerDate,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_position, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = b.seq)              AS careerPosition,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_task, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = b.seq)              AS careerTask,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_location, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = b.seq)              AS careerLocation,
                     b.military_gbn,
                     b.military_reason,
                     b.disabled_gbn,
                     b.job_support_gbn,
                     b.tech_edu_gbn,
                     b.tech_edu_name,
                     b.apply_reason,
                     b.tech_reason,
                     b.activity_reason,
                     b.plan_reason,
                     b.etc_reason,
                     b.cancel_dttm,
                     b.cancel_reason,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_name, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = b.seq)              AS licenseName,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_date, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = b.seq)              AS licenseDate,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_org, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = b.seq)              AS licenseOrg,
                     b.refund_bank_code,
                     b.refund_bank_name,
                     b.refund_bank_customer_name,
                     b.refund_bank_number,
                     b.del_yn,
                     b.note,
                     b.init_regi_pic,
                     b.init_regi_dttm,
                     b.final_regi_pic,
                     b.final_regi_dttm
              FROM boarder b
              LEFT JOIN member m
              ON b.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelFrpDetailList" resultType="com.mtf.edumarine.dto.FrpDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelFrpDetailList */
        SELECT rst.*
        FROM (SELECT f.seq,
                     f.member_seq,
                     f.train_seq,
                     f.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(f.name_ko, m.name)                  AS nameKo,
                     IFNULL(f.name_en, m.name_en)               AS name_en,
                     IFNULL(f.phone, m.phone)                   AS phone,
                     IFNULL(f.email, m.email)                   AS email,
                     IFNULL(f.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(f.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(f.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(f.sex, m.sex)                       AS sex,
                     f.age,
                     IFNULL(f.address, m.address)               AS address,
                     IFNULL(f.address_detail, m.address_detail) AS addressDetail,
                     f.top_clothes_size,
                     f.bottom_clothes_size,
                     f.shoes_size,
                     f.participation_path,
                     f.grade_gbn,
                     f.school_name,
                     f.major,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_place, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = f.seq)              AS careerPlace,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_date, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = f.seq)              AS careerDate,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_position, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = f.seq)              AS careerPosition,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_task, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = f.seq)              AS careerTask,
                     (SELECT GROUP_CONCAT(COALESCE(c.career_location, '-') SEPARATOR '^')
                      FROM career c
                      WHERE c.boarder_seq = f.seq)              AS careerLocation,
                     f.military_gbn,
                     f.military_reason,
                     f.disabled_gbn,
                     f.job_support_gbn,
                     f.know_path,
                     f.know_path_reason,
                     f.apply_reason,
                     f.tech_reason,
                     f.activity_reason,
                     f.plan_reason,
                     f.etc_reason,
                     f.cancel_dttm,
                     f.cancel_reason,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_name, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = f.seq)              AS licenseName,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_date, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = f.seq)              AS licenseDate,
                     (SELECT GROUP_CONCAT(COALESCE(l.license_org, '-') SEPARATOR '^')
                      FROM license l
                      WHERE l.boarder_seq = f.seq)              AS licenseOrg,
                     f.refund_bank_code,
                     f.refund_bank_name,
                     f.refund_bank_customer_name,
                     f.refund_bank_number,
                     f.del_yn,
                     f.note,
                     f.init_regi_pic,
                     f.init_regi_dttm,
                     f.final_regi_pic,
                     f.final_regi_dttm
              FROM frp f
              LEFT JOIN member m
              ON f.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelOutboarderDetailList" resultType="com.mtf.edumarine.dto.OutboarderDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelOutboarderDetailList */
        SELECT rst.*
        FROM (SELECT o.seq,
                     o.member_seq,
                     o.train_seq,
                     o.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(o.name_ko, m.name)                  AS nameKo,
                     IFNULL(o.name_en, m.name_en)               AS name_en,
                     IFNULL(o.phone, m.phone)                   AS phone,
                     IFNULL(o.email, m.email)                   AS email,
                     IFNULL(o.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(o.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(o.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(o.address, m.address)               AS address,
                     IFNULL(o.address_detail, m.address_detail) AS addressDetail,
                     o.clothes_size,
                     o.participation_path,
                     o.cancel_dttm,
                     o.cancel_reason,
                     o.refund_bank_code,
                     o.refund_bank_name,
                     o.refund_bank_customer_name,
                     o.refund_bank_number,
                     o.del_yn,
                     o.note,
                     o.init_regi_pic,
                     o.init_regi_dttm,
                     o.final_regi_pic,
                     o.final_regi_dttm
              FROM outboarder o
              LEFT JOIN member m
              ON o.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelInboarderDetailList" resultType="com.mtf.edumarine.dto.InboarderDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelInboarderDetailList */
        SELECT rst.*
        FROM (SELECT i.seq,
                     i.member_seq,
                     i.train_seq,
                     i.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(i.name_ko, m.name)                  AS nameKo,
                     IFNULL(i.name_en, m.name_en)               AS name_en,
                     IFNULL(i.phone, m.phone)                   AS phone,
                     IFNULL(i.email, m.email)                   AS email,
                     IFNULL(i.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(i.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(i.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(i.address, m.address)               AS address,
                     IFNULL(i.address_detail, m.address_detail) AS addressDetail,
                     i.clothes_size,
                     i.participation_path,
                     i.cancel_dttm,
                     i.cancel_reason,
                     i.refund_bank_code,
                     i.refund_bank_name,
                     i.refund_bank_customer_name,
                     i.refund_bank_number,
                     i.del_yn,
                     i.note,
                     i.init_regi_pic,
                     i.init_regi_dttm,
                     i.final_regi_pic,
                     i.final_regi_dttm
              FROM inboarder i
              LEFT JOIN member m
              ON i.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelSailyachtDetailList" resultType="com.mtf.edumarine.dto.SailyachtDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelSailyachtDetailList */
        SELECT rst.*
        FROM (SELECT s.seq,
                     s.member_seq,
                     s.train_seq,
                     s.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(s.name_ko, m.name)                  AS nameKo,
                     IFNULL(s.name_en, m.name_en)               AS name_en,
                     IFNULL(s.phone, m.phone)                   AS phone,
                     IFNULL(s.email, m.email)                   AS email,
                     IFNULL(s.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(s.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(s.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(s.address, m.address)               AS address,
                     IFNULL(s.address_detail, m.address_detail) AS addressDetail,
                     s.clothes_size,
                     s.participation_path,
                     s.cancel_dttm,
                     s.cancel_reason,
                     s.refund_bank_code,
                     s.refund_bank_name,
                     s.refund_bank_customer_name,
                     s.refund_bank_number,
                     s.del_yn,
                     s.note,
                     s.init_regi_pic,
                     s.init_regi_dttm,
                     s.final_regi_pic,
                     s.final_regi_dttm
              FROM sailyacht s
              LEFT JOIN member m
              ON s.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelHighhorsepowerDetailList" resultType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelHighhorsepowerDetailList */
        SELECT rst.*
        FROM (SELECT h.seq,
                     h.member_seq,
                     h.train_seq,
                     h.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(h.name_ko, m.name)                  AS nameKo,
                     IFNULL(h.name_en, m.name_en)               AS name_en,
                     IFNULL(h.phone, m.phone)                   AS phone,
                     IFNULL(h.email, m.email)                   AS email,
                     IFNULL(h.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(h.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(h.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(h.address, m.address)               AS address,
                     IFNULL(h.address_detail, m.address_detail) AS addressDetail,
                     h.clothes_size,
                     h.participation_path,
                     h.train_understand,
                     h.train_understand_etc,
                     h.recommend_person,
                     h.cancel_dttm,
                     h.cancel_reason,
                     h.refund_bank_code,
                     h.refund_bank_name,
                     h.refund_bank_customer_name,
                     h.refund_bank_number,
                     h.del_yn,
                     h.note,
                     h.init_regi_pic,
                     h.init_regi_dttm,
                     h.final_regi_pic,
                     h.final_regi_dttm
              FROM highhorsepower h
              LEFT JOIN member m
              ON h.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelHighSelfDetailList" resultType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelHighSelfDetailList */
        SELECT rst.*
        FROM (SELECT e.seq,
                     e.member_seq,
                     e.train_seq,
                     e.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(e.name_ko, m.name)                  AS nameKo,
                     IFNULL(e.name_en, m.name_en)               AS name_en,
                     IFNULL(e.phone, m.phone)                   AS phone,
                     IFNULL(e.email, m.email)                   AS email,
                     IFNULL(e.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(e.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(e.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(e.address, m.address)               AS address,
                     IFNULL(e.address_detail, m.address_detail) AS addressDetail,
                     e.clothes_size,
                     e.participation_path,
                     e.train_understand,
                     e.train_understand_etc,
                     e.recommend_person,
                     e.cancel_dttm,
                     e.cancel_reason,
                     e.refund_bank_code,
                     e.refund_bank_name,
                     e.refund_bank_customer_name,
                     e.refund_bank_number,
                     e.del_yn,
                     e.note,
                     e.init_regi_pic,
                     e.init_regi_dttm,
                     e.final_regi_pic,
                     e.final_regi_dttm
              FROM highself e
              LEFT JOIN member m
              ON e.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelHighSpecialDetailList" resultType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelHighSpecialDetailList */
        SELECT rst.*
        FROM (SELECT c.seq,
                     c.member_seq,
                     c.train_seq,
                     c.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(c.name_ko, m.name)                  AS nameKo,
                     IFNULL(c.name_en, m.name_en)               AS name_en,
                     IFNULL(c.phone, m.phone)                   AS phone,
                     IFNULL(c.email, m.email)                   AS email,
                     IFNULL(c.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(c.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(c.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     c.cancel_dttm,
                     c.cancel_reason,
                     c.refund_bank_code,
                     c.refund_bank_name,
                     c.refund_bank_customer_name,
                     c.refund_bank_number,
                     c.del_yn,
                     c.note,
                     c.init_regi_pic,
                     c.init_regi_dttm,
                     c.final_regi_pic,
                     c.final_regi_dttm
              FROM highspecial c
              LEFT JOIN member m
              ON c.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelSterndriveDetailList" resultType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelSterndriveDetailList */
        SELECT rst.*
        FROM (SELECT s.seq,
                     s.member_seq,
                     s.train_seq,
                     s.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(s.name_ko, m.name)                  AS nameKo,
                     IFNULL(s.name_en, m.name_en)               AS name_en,
                     IFNULL(s.phone, m.phone)                   AS phone,
                     IFNULL(s.email, m.email)                   AS email,
                     IFNULL(s.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(s.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(s.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(s.address, m.address)               AS address,
                     IFNULL(s.address_detail, m.address_detail) AS addressDetail,
                     s.clothes_size,
                     s.participation_path,
                     s.train_understand,
                     s.train_understand_etc,
                     s.recommend_person,
                     s.cancel_dttm,
                     s.cancel_reason,
                     s.refund_bank_code,
                     s.refund_bank_name,
                     s.refund_bank_customer_name,
                     s.refund_bank_number,
                     s.del_yn,
                     s.note,
                     s.init_regi_pic,
                     s.init_regi_dttm,
                     s.final_regi_pic,
                     s.final_regi_dttm
              FROM sterndrive s
              LEFT JOIN member m
              ON s.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelSternSpecialDetailList" resultType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelSternSpecialDetailList */
        SELECT rst.*
        FROM (SELECT ss.seq,
                     ss.member_seq,
                     ss.train_seq,
                     ss.apply_status,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(ss.name_ko, m.name)                  AS nameKo,
                     IFNULL(ss.name_en, m.name_en)               AS name_en,
                     IFNULL(ss.phone, m.phone)                   AS phone,
                     IFNULL(ss.email, m.email)                   AS email,
                     IFNULL(ss.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(ss.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(ss.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     ss.cancel_dttm,
                     ss.cancel_reason,
                     ss.refund_bank_code,
                     ss.refund_bank_name,
                     ss.refund_bank_customer_name,
                     ss.refund_bank_number,
                     ss.del_yn,
                     ss.note,
                     ss.init_regi_pic,
                     ss.init_regi_dttm,
                     ss.final_regi_pic,
                     ss.final_regi_dttm
              FROM sternspecial ss
              LEFT JOIN member m
              ON ss.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelBasicDetailList" resultType="com.mtf.edumarine.dto.BasicDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelBasicDetailList */
        SELECT rst.*
        FROM (SELECT b.seq,
                     b.member_seq,
                     b.train_seq,
                     b.apply_status,
                     b.boarder_gbn,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(b.name_ko, m.name)                  AS nameKo,
                     IFNULL(b.name_en, m.name_en)               AS name_en,
                     IFNULL(b.phone, m.phone)                   AS phone,
                     IFNULL(b.email, m.email)                   AS email,
                     IFNULL(b.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(b.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(b.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(b.address, m.address)               AS address,
                     IFNULL(b.address_detail, m.address_detail) AS addressDetail,
                     b.clothes_size,
                     b.participation_path,
                     b.recommend_person,
                     b.cancel_dttm,
                     b.cancel_reason,
                     b.refund_bank_code,
                     b.refund_bank_name,
                     b.refund_bank_customer_name,
                     b.refund_bank_number,
                     b.del_yn,
                     b.note,
                     b.init_regi_pic,
                     b.init_regi_dttm,
                     b.final_regi_pic,
                     b.final_regi_dttm
              FROM basic b
              LEFT JOIN member m
              ON b.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectExcelEmergencyDetailList" resultType="com.mtf.edumarine.dto.EmergencyDetailDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectExcelEmergencyDetailList */
        SELECT rst.*
        FROM (SELECT e.seq,
                     e.member_seq,
                     e.train_seq,
                     e.apply_status,
                     e.boarder_gbn,
                     IFNULL(m.apply_status, '-')                AS memberStatus,
                     IFNULL(m.id, '-')                          AS id,
                     IFNULL(e.name_ko, m.name)                  AS nameKo,
                     IFNULL(e.name_en, m.name_en)               AS name_en,
                     IFNULL(e.phone, m.phone)                   AS phone,
                     IFNULL(e.email, m.email)                   AS email,
                     IFNULL(e.birth_year, m.birth_year)         AS birthYear,
                     IFNULL(e.birth_month, m.birth_month)       AS birthMonth,
                     IFNULL(e.birth_day, m.birth_day)           AS birthDay,
                     IFNULL(m.sex, '-')                         AS sex,
                     IFNULL(e.address, m.address)               AS address,
                     IFNULL(e.address_detail, m.address_detail) AS addressDetail,
                     e.clothes_size,
                     e.participation_path,
                     e.recommend_person,
                     e.cancel_dttm,
                     e.cancel_reason,
                     e.refund_bank_code,
                     e.refund_bank_name,
                     e.refund_bank_customer_name,
                     e.refund_bank_number,
                     e.del_yn,
                     e.note,
                     e.init_regi_pic,
                     e.init_regi_dttm,
                     e.final_regi_pic,
                     e.final_regi_dttm
              FROM emergency e
              LEFT JOIN member m
              ON e.member_seq = m.seq) rst
        ORDER BY rst.member_seq IS NOT NULL DESC, rst.nameKo
    </select>

    <select id="selectMemberCount" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectMemberCount */
        SELECT COUNT(*) AS inCount
        FROM member
        WHERE apply_status = '회원'
          AND del_yn = 'N'
    </select>

    <select id="selectTrainCount" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectTrainCount */
        SELECT SUM(r.cnt) AS inCount
        FROM (SELECT COUNT(*) AS cnt
              FROM regular r
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND r.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND r.apply_status LIKE '%취소%'
                </if>
                AND r.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) as cnt
              FROM boarder b
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND b.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND b.apply_status LIKE '%취소%'
                </if>
                AND b.apply_status NOT LIKE '%대기%'
                AND b.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM frp f
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND f.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND f.apply_status LIKE '%취소%'
                </if>
                AND f.apply_status NOT LIKE '%대기%'
                AND f.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM outboarder o
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND o.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND o.apply_status LIKE '%취소%'
                </if>
                AND o.apply_status NOT LIKE '%대기%'
                AND o.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS CNT
              FROM inboarder i
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND i.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND i.apply_status LIKE '%취소%'
                </if>
                AND i.apply_status NOT LIKE '%대기%'
                AND i.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sailyacht s
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND s.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND s.apply_status LIKE '%취소%'
                </if>
                AND s.apply_status NOT LIKE '%대기%'
                AND s.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highhorsepower h
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND h.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND h.apply_status LIKE '%취소%'
                </if>
                AND h.apply_status NOT LIKE '%대기%'
                AND h.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highself e
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND e.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND e.apply_status LIKE '%취소%'
                </if>
                AND e.apply_status NOT LIKE '%대기%'
                AND e.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highspecial c
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND c.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND c.apply_status LIKE '%취소%'
                </if>
                AND c.apply_status NOT LIKE '%대기%'
                AND c.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sterndrive t
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND t.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND t.apply_status LIKE '%취소%'
                </if>
                AND t.apply_status NOT LIKE '%대기%'
                AND t.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sternspecial sp
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND sp.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND sp.apply_status LIKE '%취소%'
                </if>
                AND sp.apply_status NOT LIKE '%대기%'
                AND sp.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM basic bs
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND bs.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND bs.apply_status LIKE '%취소%'
                </if>
                AND bs.apply_status NOT LIKE '%대기%'
                AND bs.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM emergency em
              WHERE 1=1
                <if test='gbn eq "ALL"'>
                AND em.apply_status NOT LIKE '%취소%'
                </if>
                <if test='gbn eq "CANCEL"'>
                AND em.apply_status LIKE '%취소%'
                </if>
                AND em.apply_status NOT LIKE '%대기%'
                AND em.del_yn = 'N'
              ) r
    </select>

    <select id="selectStatisticsAccessorDay" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectStatisticsAccessorDay */
        SELECT DATE_FORMAT(in_dttm, '%Y.%m.%d') as x
             , in_count as y
        FROM statistics
        WHERE gbn = #{gbn}
        ORDER BY in_dttm
    </select>

    <select id="selectStatisticsAccessorMonth" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectStatisticsAccessorMonth */
        SELECT DATE_FORMAT(in_dttm, '%Y.%m') as x
             , SUM(in_count) as y
        FROM statistics
        WHERE gbn = #{gbn}
        GROUP BY DATE_FORMAT(in_dttm, '%Y.%m')
        ORDER BY in_dttm ASC
    </select>

    <select id="selectStatisticsAccessorWeek" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectStatisticsAccessorWeek */
        SELECT CONCAT(
                DATE_FORMAT(DATE_SUB(in_dttm, INTERVAL(DAYOFWEEK(in_dttm)-1) DAY), '%Y.%m.%d')
            , ' - '
            , DATE_FORMAT(DATE_SUB(in_dttm, INTERVAL(DAYOFWEEK(in_dttm)-7) DAY), '%Y.%m.%d')
            ) as x
             , SUM(in_count) AS y
        FROM statistics
        WHERE gbn = #{gbn}
        GROUP BY x
    </select>

    <select id="selectStatisticsTrainMember" parameterType="com.mtf.edumarine.dto.StatisticsDTO" resultType="com.mtf.edumarine.dto.StatisticsDTO">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectStatisticsTrainMember */
        SELECT GROUP_CONCAT(COALESCE(r.cnt, '0') SEPARATOR ',') AS inCount
        FROM (SELECT COUNT(*) AS cnt
              FROM regular r
              WHERE r.apply_status NOT LIKE '%취소%'
                and r.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM boarder b
              WHERE b.apply_status NOT LIKE '%취소%'
                and b.apply_status NOT LIKE '%대기%'
                and b.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM frp f
              WHERE f.apply_status NOT LIKE '%취소%'
                and f.apply_status NOT LIKE '%대기%'
                and f.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM outboarder o
              WHERE o.apply_status NOT LIKE '%취소%'
                and o.apply_status NOT LIKE '%대기%'
                and o.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM inboarder i
              WHERE i.apply_status NOT LIKE '%취소%'
                and i.apply_status NOT LIKE '%대기%'
                and i.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sailyacht s
              WHERE s.apply_status NOT LIKE '%취소%'
                and s.apply_status NOT LIKE '%대기%'
                and s.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highhorsepower h
              WHERE h.apply_status NOT LIKE '%취소%'
                and h.apply_status NOT LIKE '%대기%'
                and h.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highself e
              WHERE e.apply_status NOT LIKE '%취소%'
                and e.apply_status NOT LIKE '%대기%'
                and e.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM highspecial p
              WHERE p.apply_status NOT LIKE '%취소%'
                and p.apply_status NOT LIKE '%대기%'
                and p.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sterndrive t
              WHERE t.apply_status NOT LIKE '%취소%'
                and t.apply_status NOT LIKE '%대기%'
                and t.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM sternspecial ss
              WHERE ss.apply_status NOT LIKE '%취소%'
                and ss.apply_status NOT LIKE '%대기%'
                and ss.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM basic bs
              WHERE bs.apply_status NOT LIKE '%취소%'
                and bs.apply_status NOT LIKE '%대기%'
                and bs.del_yn = 'N'
              UNION ALL
              SELECT COUNT(*) AS cnt
              FROM emergency em
              WHERE em.apply_status NOT LIKE '%취소%'
                and em.apply_status NOT LIKE '%대기%'
                and em.del_yn = 'N') r
    </select>

    <select id="selectRegularTrainInfoList" parameterType="com.mtf.edumarine.dto.RegularDTO" resultType="com.mtf.edumarine.dto.RegularDTO$TrainInfo">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectRegularTrainInfoList */
        SELECT r.init_regi_dttm, t.gbn, t.next_time, r.apply_status
        FROM (SELECT b.train_seq, b.apply_status, b.init_regi_dttm
              FROM boarder b
              WHERE b.member_seq = #{memberSeq}
              UNION ALL
              SELECT f.train_seq, f.apply_status, f.init_regi_dttm
              FROM frp f
              WHERE f.member_seq = #{memberSeq}
              UNION ALL
              SELECT o.train_seq, o.apply_status, o.init_regi_dttm
              FROM outboarder o
              WHERE o.member_seq = #{memberSeq}
              UNION ALL
              SELECT i.train_seq, i.apply_status, i.init_regi_dttm
              FROM inboarder i
              WHERE i.member_seq = #{memberSeq}
              UNION ALL
              SELECT s.train_seq, s.apply_status, s.init_regi_dttm
              FROM sailyacht s
              WHERE s.member_seq = #{memberSeq}
              UNION ALL
              SELECT h.train_seq, h.apply_status, h.init_regi_dttm
              FROM highhorsepower h
              WHERE h.member_seq = #{memberSeq}
              UNION ALL
              SELECT t1.train_seq, t1.apply_status, t1.init_regi_dttm
              FROM sterndrive t1
              WHERE t1.member_seq = #{memberSeq}
              ) r
        JOIN train t
        ON r.train_seq = t.seq
        WHERE t.del_yn = 'N'
    </select>

    <delete id="deleteTrainTemplate" parameterType="java.lang.String">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.deleteTrainTemplate */
        DELETE
        FROM train_template
        WHERE major = #{major}
    </delete>
    
    <insert id="insertTrainTemplate" parameterType="com.mtf.edumarine.dto.TrainTemplateDTO$TrainTemplateInfo">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.insertTrainTemplate */
        INSERT INTO train_template
            ( major
            , middle
            , small
            , value
            , note
            , init_regi_pic
            , final_regi_pic
            )
        VALUES
            ( #{major}
            , #{middle}
            , #{small}
            , <![CDATA[#{value}]]>
            , #{note}
            , '관리자'
            , '관리자'
            )
    </insert>

    <select id="selectTrainTemplateList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.TrainTemplateDTO$TrainTemplateInfo">
        /* com.mtf.edumarine.mapper.EdumarineMngMapper.selectTrainTemplateList */
        SELECT major
             , middle
             , small
             , value
             , note
        FROM train_template
        WHERE major = #{major}
        ORDER BY major, small, middle , CAST(note as signed)
    </select>
    
    <select id="selectRequestList" parameterType="com.mtf.edumarine.dto.SearchDTO" resultType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectRequestList */
        SELECT r.seq
             , r.emergency_yn
             , r.gbn
             , r.progress_step
             , r.complete_expect_date
             , r.title
             , (select count(*) from request_reply rp where rp.request_seq = r.seq) as replyCnt
             , r.writer
             , r.write_date
             , r.note
             , r.init_regi_pic
             , r.init_regi_dttm
             , r.final_regi_pic
             , r.final_regi_dttm
        FROM request r
        WHERE 1=1
         <if test='searchText != null and searchText != ""'>
             <if test='condition eq "TITLE"'>
                AND r.title LIKE BINARY CONCAT('%',#{searchText},'%')
             </if>
             <if test='condition eq "CONTENT"'>
                AND r.content LIKE BINARY CONCAT('%',#{searchText},'%')
             </if>
         </if>
         <if test='gbn != null and gbn != ""'>
            AND r.gbn = #{gbn}
         </if>
         <if test='progressStep != null and progressStep != ""'>
            AND r.progress_step = #{progressStep}
         </if>
         <if test='emergencyYn != null and emergencyYn != "" and emergencyYn != "N"'>
            AND r.emergency_yn = 'Y'
        </if>
        ORDER BY r.init_regi_dttm DESC
    </select>

    <select id="selectRequestSingle" parameterType="com.mtf.edumarine.dto.RequestDTO" resultType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectRequestSingle */
        SELECT seq
             , emergency_yn
             , gbn
             , progress_step
             , complete_expect_date
             , title
             , content
             , writer
             , write_date
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM request
        WHERE seq = #{seq}
    </select>

    <select id="getRequestSeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getRequestSeq */
        SELECT CONCAT('R', LPAD(nextval('request_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertRequest" parameterType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertRequest */
        INSERT INTO request
        ( seq
        , emergency_yn
        , gbn
        , progress_step
        , complete_expect_date
        , title
        , content
        , writer
        , write_date
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{emergencyYn}
            , #{gbn}
            , #{progressStep}
            , #{completeExpectDate}
            , <![CDATA[#{title}]]>
            , <![CDATA[#{content}]]>
            , #{writer}
            , #{writeDate}
            , #{note}
            , 'REQUEST'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'REQUEST'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <update id="updateRequest" parameterType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateRequest */
        UPDATE request
        SET emergency_yn = #{emergencyYn}
          , gbn = #{gbn}
          , progress_step = #{progressStep}
        <if test='completeExpectDate != null and completeExpectDate != ""'>
          , complete_expect_date = #{completeExpectDate}
        </if>
          , title = <![CDATA[#{title}]]>
          , content = <![CDATA[#{content}]]>
          , writer = #{writer}
          , write_date = #{writeDate}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <delete id="deleteRequest" parameterType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteRequest */
        DELETE FROM request
        WHERE seq = #{seq}
    </delete>

    <select id="selectReplyList" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.RequestReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectReplyList */
        SELECT seq
             , request_seq
             , depth_reply_no
             , mo_reply_seq
             , writer
             , content
             , write_date
             , note
             , init_regi_pic
             , init_regi_dttm
             , final_regi_pic
             , final_regi_dttm
        FROM request_reply
        WHERE request_seq = #{requestSeq}
    </select>

    <select id="getReplySeq" resultType="java.lang.String">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.getReplySeq */
        SELECT CONCAT('RP', LPAD(nextval('reply_seq'), '7', '0'))
        FROM DUAL
    </select>

    <insert id="insertReply" parameterType="com.mtf.edumarine.dto.RequestReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.insertReply */
        INSERT INTO request_reply
        ( seq
        , request_seq
        , depth_reply_no
        , mo_reply_seq
        , writer
        , content
        , write_date
        , note
        , init_regi_pic
        , init_regi_dttm
        , final_regi_pic
        , final_regi_dttm
        )
        VALUES
            ( #{seq}
            , #{requestSeq}
            , #{depthReplyNo}
            , #{moReplySeq}
            , #{writer}
            , <![CDATA[#{content}]]>
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , #{note}
            , 'REPLY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            , 'REPLY'
            , DATE_FORMAT(NOW(), '%Y-%m-%d %T')
            )
    </insert>

    <delete id="deleteReply" parameterType="com.mtf.edumarine.dto.RequestReplyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.deleteReply */
        DELETE FROM request_reply
        WHERE seq = #{seq}
    </delete>

    <update id="updateRequestProgressStep" parameterType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateRequestProgressStep */
        UPDATE request
        SET progress_step = #{progressStep}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateRequestCompleteExpect" parameterType="com.mtf.edumarine.dto.RequestDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateRequestCompleteExpect */
        UPDATE request
        SET complete_expect_date = #{completeExpectDate}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <select id="selectAllTrainInfo" parameterType="java.lang.String" resultType="com.mtf.edumarine.dto.TrainUpdateDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.selectAllTrainInfo */
        SELECT '해상엔진 테크니션 (선내기/선외기)' AS trainName
             , b.train_seq
        FROM boarder b
        WHERE b.seq = #{seq}
        UNION ALL
        SELECT 'FRP 레저보트 선체 정비 테크니션' AS trainName
             , f.train_seq
        FROM frp f
        WHERE f.seq = #{seq}
        UNION ALL
        SELECT '해상엔진 자가정비 (선내기)' AS trainName
             , i.train_seq
        FROM inboarder i
        WHERE i.seq = #{seq}
        UNION ALL
        SELECT '해상엔진 자가정비 (선외기)' AS trainName
             , o.train_seq
        FROM outboarder o
        WHERE o.seq = #{seq}
        UNION ALL
        SELECT '해상엔진 자가정비 (세일요트)' AS trainName
             , s.train_seq
        FROM sailyacht s
        WHERE s.seq = #{seq}
        UNION ALL
        SELECT '고마력 선외기 정비 중급 테크니션' AS trainName
             , h.train_seq
        FROM highhorsepower h
        WHERE h.seq = #{seq}
        UNION ALL
        SELECT '자가정비 심화과정 (고마력 선외기)' AS trainName
             , e.train_seq
        FROM highself e
        WHERE e.seq = #{seq}
        UNION ALL
        SELECT '고마력 선외기 정비 중급 테크니션 (특별반)' AS trainName
             , c.train_seq
        FROM highspecial c
        WHERE c.seq = #{seq}
        UNION ALL
        SELECT '스턴드라이브 정비 전문가과정' AS trainName
             , t.train_seq
        FROM sterndrive t
        WHERE t.seq = #{seq}
        UNION ALL
        SELECT '스턴드라이브 정비 전문가과정 (특별반)' AS trainName
             , ss.train_seq
        FROM sternspecial ss
        WHERE ss.seq = #{seq}
    </select>

    <update id="updateBoarderTrainSeq" parameterType="com.mtf.edumarine.dto.BoarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBoarderTrainSeq */
        UPDATE boarder
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateFrpTrainSeq" parameterType="com.mtf.edumarine.dto.FrpDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateFrpTrainSeq */
        UPDATE frp
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateOutboarderTrainSeq" parameterType="com.mtf.edumarine.dto.OutboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateOutboarderTrainSeq */
        UPDATE outboarder
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateInboarderTrainSeq" parameterType="com.mtf.edumarine.dto.InboarderDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateInboarderTrainSeq */
        UPDATE inboarder
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSailyachtTrainSeq" parameterType="com.mtf.edumarine.dto.SailyachtDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSailyachtTrainSeq */
        UPDATE sailyacht
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighHorsePowerTrainSeq" parameterType="com.mtf.edumarine.dto.HighHorsePowerDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighHorsePowerTrainSeq */
        UPDATE highhorsepower
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSelfTrainSeq" parameterType="com.mtf.edumarine.dto.HighSelfDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighSelfTrainSeq */
        UPDATE highself
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateHighSpecialTrainSeq" parameterType="com.mtf.edumarine.dto.HighSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateHighSpecialTrainSeq */
        UPDATE highspecial
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSterndriveTrainSeq" parameterType="com.mtf.edumarine.dto.SterndriveDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSterndriveTrainSeq */
        UPDATE sterndrive
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateSternSpecialTrainSeq" parameterType="com.mtf.edumarine.dto.SternSpecialDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateSternSpecialTrainSeq */
        UPDATE sternspecial
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateBasicTrainSeq" parameterType="com.mtf.edumarine.dto.BasicDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateBasicTrainSeq */
        UPDATE basic
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

    <update id="updateEmergencyTrainSeq" parameterType="com.mtf.edumarine.dto.EmergencyDTO">
        /* com.mtf.edumarine.mapper.EduMarineMngMapper.updateEmergencyTrainSeq */
        UPDATE emergency
        SET train_seq = #{trainSeq}
          , final_regi_dttm = DATE_FORMAT(NOW(), '%Y-%m-%d %T')
        WHERE seq = #{seq}
    </update>

</mapper>